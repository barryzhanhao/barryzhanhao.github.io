<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="工程配置前置要求 JDK17 Gradle7.5 IntelliJ IDEA 2022  工程配置使用gradle创建验证性的工程，因为使用SpringBoot3是3.0.0-RC版本，需要在setting.gradle里面，添加spring的maven仓库。 12345pluginManagement &amp;#123;    repositories &amp;#123;        maven &amp;#12">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot3快速体验">
<meta property="og:url" content="http://example.com/2022/11/23/SpringBoot3%E5%BF%AB%E9%80%9F%E4%BD%93%E9%AA%8C/index.html">
<meta property="og:site_name" content="Zhan Hao&#39;s Blogs">
<meta property="og:description" content="工程配置前置要求 JDK17 Gradle7.5 IntelliJ IDEA 2022  工程配置使用gradle创建验证性的工程，因为使用SpringBoot3是3.0.0-RC版本，需要在setting.gradle里面，添加spring的maven仓库。 12345pluginManagement &amp;#123;    repositories &amp;#123;        maven &amp;#12">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9pkdai6j30ls0oamys.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9u94ab5j30y40243yz.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9y5lyhfj31e2036js3.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8fa24m6avj318w03eq3h.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8fa3oyp8sj30ou01yjrh.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8g6book3lj30su172gro.jpg">
<meta property="article:published_time" content="2022-11-23T10:45:08.000Z">
<meta property="article:modified_time" content="2022-11-24T05:55:22.315Z">
<meta property="article:author" content="Zhan Hao">
<meta property="article:tag" content="SpringBoot3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9pkdai6j30ls0oamys.jpg">

<link rel="canonical" href="http://example.com/2022/11/23/SpringBoot3%E5%BF%AB%E9%80%9F%E4%BD%93%E9%AA%8C/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>SpringBoot3快速体验 | Zhan Hao's Blogs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zhan Hao's Blogs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/11/23/SpringBoot3%E5%BF%AB%E9%80%9F%E4%BD%93%E9%AA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhan Hao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhan Hao's Blogs">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot3快速体验
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-11-23 18:45:08" itemprop="dateCreated datePublished" datetime="2022-11-23T18:45:08+08:00">2022-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-11-24 13:55:22" itemprop="dateModified" datetime="2022-11-24T13:55:22+08:00">2022-11-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="工程配置"><a href="#工程配置" class="headerlink" title="工程配置"></a>工程配置</h1><h2 id="前置要求"><a href="#前置要求" class="headerlink" title="前置要求"></a>前置要求</h2><ul>
<li>JDK17</li>
<li>Gradle7.5</li>
<li>IntelliJ IDEA 2022</li>
</ul>
<h2 id="工程配置-1"><a href="#工程配置-1" class="headerlink" title="工程配置"></a>工程配置</h2><p>使用gradle创建验证性的工程，因为使用SpringBoot3是3.0.0-RC版本，需要在setting.gradle里面，添加spring的maven仓库。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pluginManagement &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://repo.spring.io/milestone&#x27;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>root的build.gradle中，添加spring的maven仓库</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://repo.spring.io/milestone&#x27;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>引入<strong>org.springframework.boot</strong>插件和<strong>org.graalvm.buildtools.native</strong>插件</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;java&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;java-library&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;project-report&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;idea&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;org.springframework.boot&#x27;</span> version <span class="string">&#x27;3.0.0-RC2&#x27;</span> apply <span class="literal">false</span></span><br><span class="line">    id <span class="string">&#x27;org.graalvm.buildtools.native&#x27;</span> version <span class="string">&#x27;0.9.17&#x27;</span> apply <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SpringBoot module里面，开启插件</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="attr">plugin:</span> <span class="string">&quot;org.springframework.boot&quot;</span></span><br><span class="line">apply <span class="attr">plugin:</span> <span class="string">&quot;org.graalvm.buildtools.native&quot;</span></span><br></pre></td></tr></table></figure>

<p>引入SpringBoot3依赖</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    springBootVersion = <span class="string">&#x27;3.0.0-RC2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">  implementation(platform(<span class="string">&quot;org.springframework.boot:spring-boot-dependencies:$springBootVersion&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>服务启动类和API接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置完成上述插件和代码后，可以在gradle看到以下tasks。</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9pkdai6j30ls0oamys.jpg" alt="image-20221123190638672"></p>
<p>执行bootBuildImage，会得到一个docker image，SpringBoot3的云原生的容器镜像。日志如下：</p>
<p><strong>大致流程</strong>如下：</p>
<ol>
<li><p>拉取构建build native image的 builder image （docker.io/paketobuildpacks/builder:tiny，docker.io/paketobuildpacks/run:tiny-cnb）</p>
</li>
<li><p>开始构建云原生镜像（Running creator）</p>
<ul>
<li><p>分析（ANALYZING），目标云原生镜像是否存在</p>
</li>
<li><p>检测（DETECTING），检测所需依赖lib的版本（paketo-buildpacks/ca-certificates，paketo-buildpacks/bellsoft-liberica等）</p>
</li>
<li><p>保存（RESTORING），保存所需依赖lib版本</p>
</li>
<li><p>构建（BUILDING），拉取所以依赖lib，设置构建配置（比如 $BP_JVM_TYPE                 JRE                                                          the JVM type - JDK or JRE）</p>
</li>
<li><p><strong>GraalVM虚拟机</strong>，编译代码，构建Natvie Image（GraalVM Native Image）,这是核心步骤，7步，具体每步干啥，可以参考GraalVM官方文档，<a target="_blank" rel="noopener" href="https://www.graalvm.org/22.0/reference-manual/native-image/BuildOutput/">链接</a>。</p>
<ul>
<li>初始化（Initializing），初始化GraalVM虚拟机的各种依赖版本（比如：Version info: ‘GraalVM 22.3.0 Java 17 CE’，Java version info: ‘17.0.5+8-LTS’），设置属性初始值（比如：Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jackson2SmilePresent set to false at build time）</li>
<li>执行分析（Performing analysis），编写的代码和引入的jar包，哪些classes，fields，methods是有使用的，哪些classes、fields、methonds有使用反射，有使用JNI，使用哪些native libraries（耗时步骤：200+s）</li>
<li>构建上下文（Building Universe），包含所有classes，fields，methods，用于最后的创建的Native Image</li>
<li>解析方法（Parsing Methods ），解析使用到的方法</li>
<li>内联方法（Inlining Methods），内联使用到的方法</li>
<li>编译方法（Compiling Methods），GraalVM虚拟机，最终将用到的方法，编译成机器代码（耗时步骤：130+s）</li>
<li>生产镜像（Creating Image），生成Native Image到本机Docker images</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">&gt; Task :springboot3:bootBuildImage</span><br><span class="line">Building image &#x27;docker.io/library/springboot3:1.0.0&#x27;</span><br><span class="line"></span><br><span class="line"> &gt; Pulling builder image &#x27;docker.io/paketobuildpacks/builder:tiny&#x27; ..................................................</span><br><span class="line"> &gt; Pulled builder image &#x27;paketobuildpacks/builder@sha256:853c60ed091daf2abf5b376f8178a3ccf754b15fe45666b720d278fe48ba8c42&#x27;</span><br><span class="line"> &gt; Pulling run image &#x27;docker.io/paketobuildpacks/run:tiny-cnb&#x27; ..................................................</span><br><span class="line"> &gt; Pulled run image &#x27;paketobuildpacks/run@sha256:6edd2f36f33b08a4553449b91cd4f4d4bcffd1c8d7677b35790d1b80fa13720c&#x27;</span><br><span class="line"> &gt; Executing lifecycle version v0.15.1</span><br><span class="line"> &gt; Using build cache volume &#x27;pack-cache-64ae48079398.build&#x27;</span><br><span class="line"></span><br><span class="line"> &gt; Running creator</span><br><span class="line">    [creator]     ===&gt; ANALYZING</span><br><span class="line">    [creator]     Previous image with name &quot;docker.io/library/springboot3:1.0.0&quot; not found</span><br><span class="line">    [creator]     ===&gt; DETECTING</span><br><span class="line">    [creator]     6 of 14 buildpacks participating</span><br><span class="line">    [creator]     paketo-buildpacks/ca-certificates   3.5.0</span><br><span class="line">    [creator]     paketo-buildpacks/bellsoft-liberica 9.10.0</span><br><span class="line">    [creator]     paketo-buildpacks/syft              1.22.1</span><br><span class="line">    [creator]     paketo-buildpacks/executable-jar    6.5.0</span><br><span class="line">    [creator]     paketo-buildpacks/spring-boot       5.20.0</span><br><span class="line">    [creator]     paketo-buildpacks/native-image      5.6.0</span><br><span class="line">    [creator]     ===&gt; RESTORING</span><br><span class="line">    [creator]     ===&gt; BUILDING</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for CA Certificates 3.5.0</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/ca-certificates</span><br><span class="line">    [creator]       Launch Helper: Contributing to layer</span><br><span class="line">    [creator]         Creating /layers/paketo-buildpacks_ca-certificates/helper/exec.d/ca-certificates-helper</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for BellSoft Liberica 9.10.0</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/bellsoft-liberica</span><br><span class="line">    [creator]       Build Configuration:</span><br><span class="line">    [creator]         $BP_JVM_JLINK_ARGS           --no-man-pages --no-header-files --strip-debug --compress=1  configure custom link arguments (--output must be omitted)</span><br><span class="line">    [creator]         $BP_JVM_JLINK_ENABLED        false                                                        enables running jlink tool to generate custom JRE</span><br><span class="line">    [creator]         $BP_JVM_TYPE                 JRE                                                          the JVM type - JDK or JRE</span><br><span class="line">    [creator]         $BP_JVM_VERSION              11                                                           the Java version</span><br><span class="line">    [creator]       Launch Configuration:</span><br><span class="line">    [creator]         $BPL_DEBUG_ENABLED           false                                                        enables Java remote debugging support</span><br><span class="line">    [creator]         $BPL_DEBUG_PORT              8000                                                         configure the remote debugging port</span><br><span class="line">    [creator]         $BPL_DEBUG_SUSPEND           false                                                        configure whether to suspend execution until a debugger has attached</span><br><span class="line">    [creator]         $BPL_HEAP_DUMP_PATH                                                                       write heap dumps on error to this path</span><br><span class="line">    [creator]         $BPL_JAVA_NMT_ENABLED        true                                                         enables Java Native Memory Tracking (NMT)</span><br><span class="line">    [creator]         $BPL_JAVA_NMT_LEVEL          summary                                                      configure level of NMT, summary or detail</span><br><span class="line">    [creator]         $BPL_JFR_ARGS                                                                             configure custom Java Flight Recording (JFR) arguments</span><br><span class="line">    [creator]         $BPL_JFR_ENABLED             false                                                        enables Java Flight Recording (JFR)</span><br><span class="line">    [creator]         $BPL_JMX_ENABLED             false                                                        enables Java Management Extensions (JMX)</span><br><span class="line">    [creator]         $BPL_JMX_PORT                5000                                                         configure the JMX port</span><br><span class="line">    [creator]         $BPL_JVM_HEAD_ROOM           0                                                            the headroom in memory calculation</span><br><span class="line">    [creator]         $BPL_JVM_LOADED_CLASS_COUNT  35% of classes                                               the number of loaded classes in memory calculation</span><br><span class="line">    [creator]         $BPL_JVM_THREAD_COUNT        250                                                          the number of threads in memory calculation</span><br><span class="line">    [creator]         $JAVA_TOOL_OPTIONS                                                                        the JVM launch flags</span><br><span class="line">    [creator]         Using Java version 17 extracted from MANIFEST.MF</span><br><span class="line">    [creator]       BellSoft Liberica NIK 17.0.5: Contributing to layer</span><br><span class="line">    [creator]         Downloading from https://download.bell-sw.com/vm/22.3.0/bellsoft-liberica-vm-core-openjdk17.0.5+8-22.3.0+2-linux-amd64.tar.gz</span><br><span class="line">    [creator]         Verifying checksum</span><br><span class="line">    [creator]         Expanding to /layers/paketo-buildpacks_bellsoft-liberica/native-image-svm</span><br><span class="line">    [creator]         Adding 127 container CA certificates to JVM truststore</span><br><span class="line">    [creator]         Writing env.build/JAVA_HOME.override</span><br><span class="line">    [creator]         Writing env.build/JDK_HOME.override</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for Syft 1.22.1</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/syft</span><br><span class="line">    [creator]         Downloading from https://github.com/anchore/syft/releases/download/v0.60.3/syft_0.60.3_linux_amd64.tar.gz</span><br><span class="line">    [creator]         Verifying checksum</span><br><span class="line">    [creator]         Writing env.build/SYFT_CHECK_FOR_APP_UPDATE.default</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for Executable JAR 6.5.0</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/executable-jar</span><br><span class="line">    [creator]       Class Path: Contributing to layer</span><br><span class="line">    [creator]         Writing env.build/CLASSPATH.delim</span><br><span class="line">    [creator]         Writing env.build/CLASSPATH.prepend</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for Spring Boot 5.20.0</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/spring-boot</span><br><span class="line">    [creator]       Build Configuration:</span><br><span class="line">    [creator]         $BP_SPRING_CLOUD_BINDINGS_DISABLED   false  whether to contribute Spring Boot cloud bindings support</span><br><span class="line">    [creator]       Launch Configuration:</span><br><span class="line">    [creator]         $BPL_SPRING_CLOUD_BINDINGS_DISABLED  false  whether to auto-configure Spring Boot environment properties from bindings</span><br><span class="line">    [creator]         $BPL_SPRING_CLOUD_BINDINGS_ENABLED   true   Deprecated - whether to auto-configure Spring Boot environment properties from bindings</span><br><span class="line">    [creator]       Class Path: Contributing to layer</span><br><span class="line">    [creator]         native args file /workspace/META-INF/native-image/argfile</span><br><span class="line">    [creator]         Writing env.build/BP_NATIVE_IMAGE_BUILD_ARGUMENTS_FILE.default</span><br><span class="line">    [creator]         Writing env.build/CLASSPATH.append</span><br><span class="line">    [creator]         Writing env.build/CLASSPATH.delim</span><br><span class="line">    [creator]       Image labels:</span><br><span class="line">    [creator]         org.springframework.boot.version</span><br><span class="line">    [creator]     Warning: BOM table is deprecated in this buildpack api version, though it remains supported for backwards compatibility. Buildpack authors should write BOM information to &lt;layer&gt;.sbom.&lt;ext&gt;, launch.sbom.&lt;ext&gt;, or build.sbom.&lt;ext&gt;.</span><br><span class="line">    [creator]     </span><br><span class="line">    [creator]     Paketo Buildpack for Native Image 5.6.0</span><br><span class="line">    [creator]       https://github.com/paketo-buildpacks/native-image</span><br><span class="line">    [creator]       Build Configuration:</span><br><span class="line">    [creator]         $BP_BINARY_COMPRESSION_METHOD                                                    Compression mechanism used to reduce binary size. Options: `none` (default), `upx` or `gzexe`</span><br><span class="line">    [creator]         $BP_NATIVE_IMAGE                       true                                      enable native image build</span><br><span class="line">    [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS                                                 arguments to pass to the native-image command</span><br><span class="line">    [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS_FILE  /workspace/META-INF/native-image/argfile  a file with arguments to pass to the native-image command</span><br><span class="line">    [creator]         $BP_NATIVE_IMAGE_BUILT_ARTIFACT                                                  the built application artifact explicitly, required if building from a JAR</span><br><span class="line">    [creator]       Native Image: Contributing to layer</span><br><span class="line">    [creator]         Executing native-image -H:+StaticExecutableWithDynamicLibC @/workspace/META-INF/native-image/argfile -H:Name=/layers/paketo-buildpacks_native-image/native-image/pers.james.practice.springboog3.Application -cp /workspace:/workspace/BOOT-INF/classes:/workspace/BOOT-INF/lib/lombok-1.18.24.jar:/workspace/BOOT-INF/lib/guava-27.1-jre.jar:/workspace/BOOT-INF/lib/jackson-datatype-jsr310-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/jackson-module-parameter-names-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/jackson-core-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/jackson-datatype-jdk8-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/jackson-databind-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/jackson-annotations-2.14.0-rc3.jar:/workspace/BOOT-INF/lib/log4j-to-slf4j-2.19.0.jar:/workspace/BOOT-INF/lib/log4j-api-2.19.0.jar:/workspace/BOOT-INF/lib/spring-webmvc-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-web-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/micrometer-observation-1.10.0.jar:/workspace/BOOT-INF/lib/micrometer-commons-1.10.0.jar:/workspace/BOOT-INF/lib/spring-boot-autoconfigure-3.0.0-RC2.jar:/workspace/BOOT-INF/lib/spring-boot-3.0.0-RC2.jar:/workspace/BOOT-INF/lib/spring-context-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-aop-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-beans-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-expression-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-core-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/spring-jcl-6.0.0-RC4.jar:/workspace/BOOT-INF/lib/jakarta.annotation-api-2.1.1.jar:/workspace/BOOT-INF/lib/logback-classic-1.4.4.jar:/workspace/BOOT-INF/lib/logback-core-1.4.4.jar:/workspace/BOOT-INF/lib/jul-to-slf4j-2.0.3.jar:/workspace/BOOT-INF/lib/slf4j-api-2.0.3.jar:/workspace/BOOT-INF/lib/snakeyaml-1.33.jar:/workspace/BOOT-INF/lib/tomcat-embed-websocket-10.1.1.jar:/workspace/BOOT-INF/lib/tomcat-embed-core-10.1.1.jar:/workspace/BOOT-INF/lib/tomcat-embed-el-10.1.1.jar:/workspace/BOOT-INF/lib/failureaccess-1.0.1.jar:/workspace/BOOT-INF/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/workspace/BOOT-INF/lib/jsr305-3.0.2.jar:/workspace/BOOT-INF/lib/checker-qual-2.5.2.jar:/workspace/BOOT-INF/lib/error_prone_annotations-2.2.0.jar:/workspace/BOOT-INF/lib/j2objc-annotations-1.1.jar:/workspace/BOOT-INF/lib/animal-sniffer-annotations-1.17.jar pers.james.practice.springboog3.Application</span><br><span class="line">    [creator]     ================================================================================</span><br><span class="line">    [creator]     GraalVM Native Image: Generating &#x27;/layers/paketo-buildpacks_native-image/native-image/pers.james.practice.springboog3.Application&#x27; (static executable)...</span><br><span class="line">    [creator]     ================================================================================</span><br><span class="line">    [creator]     [1/7] Initializing...                                           (11.2s @ 0.22GB)</span><br><span class="line">    [creator]      Version info: &#x27;GraalVM 22.3.0 Java 17 CE&#x27;</span><br><span class="line">    [creator]      Java version info: &#x27;17.0.5+8-LTS&#x27;</span><br><span class="line">    [creator]      C compiler: gcc (linux, x86_64, 7.5.0)</span><br><span class="line">    [creator]      Garbage collector: Serial GC</span><br><span class="line">    [creator]      1 user-specific feature(s)</span><br><span class="line">    [creator]      - org.springframework.aot.nativex.feature.PreComputeFieldFeature</span><br><span class="line">    [creator]     The bundle named: org.apache.el.Messages, has not been found. If the bundle is part of a module, verify the bundle name is a fully qualified class name. Otherwise verify the bundle path is accessible in the classpath.</span><br><span class="line">    [creator]     Field org.springframework.core.NativeDetector#imageCode set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.format.support.DefaultFormattingConversionService#jsr354Present set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.KotlinDetector#kotlinPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.KotlinDetector#kotlinReflectPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#romePresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jaxb2Present set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jackson2Present set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jackson2XmlPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jackson2SmilePresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jackson2CborPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#gsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#jsonbPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#kotlinSerializationCborPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#kotlinSerializationJsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport#kotlinSerializationProtobufPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.boot.logging.logback.LogbackLoggingSystem$Factory#PRESENT set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.boot.logging.log4j2.Log4J2LoggingSystem$Factory#PRESENT set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.boot.logging.java.JavaLoggingSystem$Factory#PRESENT set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.view.InternalResourceViewResolver#jstlPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.context.support.StandardServletEnvironment#jndiPresent set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#jaxb2Present set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#jackson2Present set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#jackson2XmlPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#jackson2SmilePresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#gsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#jsonbPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#kotlinSerializationCborPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#kotlinSerializationJsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter#kotlinSerializationProtobufPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.context.event.ApplicationListenerMethodAdapter#reactiveStreamsPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.context.support.WebApplicationContextUtils#jsfPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.context.request.RequestContextHolder#jsfPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.boot.autoconfigure.web.format.WebConversionService#JSR_354_PRESENT set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#romePresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jaxb2Present set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jackson2Present set to true at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jackson2XmlPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jackson2SmilePresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jackson2CborPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#gsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#jsonbPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#kotlinSerializationCborPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#kotlinSerializationJsonPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.client.RestTemplate#kotlinSerializationProtobufPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.ReactiveAdapterRegistry#reactorPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.ReactiveAdapterRegistry#rxjava3Present set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.ReactiveAdapterRegistry#kotlinCoroutinesPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.core.ReactiveAdapterRegistry#mutinyPresent set to false at build time</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler#isContextPropagationPresent will be evaluated at runtime due to this error during build time evaluation: org.slf4j.spi.SLF4JServiceProvider: ch.qos.logback.classic.spi.LogbackServiceProvider not a subtype</span><br><span class="line">    [creator]     Field org.springframework.web.servlet.support.RequestContext#jstlPresent set to false at build time</span><br><span class="line">    [creator]     [2/7] Performing analysis...  [*********]                      (215.2s @ 1.28GB)</span><br><span class="line">    [creator]       15,670 (92.37%) of 16,964 classes reachable</span><br><span class="line">    [creator]       25,869 (67.79%) of 38,159 fields reachable</span><br><span class="line">    [creator]       75,776 (62.18%) of 121,858 methods reachable</span><br><span class="line">    [creator]          788 classes,   166 fields, and 3,521 methods registered for reflection</span><br><span class="line">    [creator]           64 classes,    70 fields, and    55 methods registered for JNI access</span><br><span class="line">    [creator]            4 native libraries: dl, pthread, rt, z</span><br><span class="line">    [creator]     [3/7] Building universe...                                      (58.9s @ 1.26GB)</span><br><span class="line">    [creator]     GC warning: 31.1s spent in 10 GCs during the last stage, taking up 52.68% of the time.</span><br><span class="line">    [creator]                 Please ensure more than 1.74GB of memory is available for Native Image</span><br><span class="line">    [creator]                 to reduce GC overhead and improve image build time.</span><br><span class="line">    [creator]     [4/7] Parsing methods...      [*****]                           (27.9s @ 1.10GB)</span><br><span class="line">    [creator]     [5/7] Inlining methods...     [***]                             (10.0s @ 1.09GB)</span><br><span class="line">    [creator]     [6/7] Compiling methods...    [***********]                    (138.3s @ 1.15GB)</span><br><span class="line">    [creator]     [7/7] Creating image...                                         (43.0s @ 1.31GB)</span><br><span class="line">    [creator]       33.84MB (45.94%) for code area:    49,725 compilation units</span><br><span class="line">    [creator]       37.03MB (50.27%) for image heap:  371,461 objects and 420 resources</span><br><span class="line">    [creator]        2.79MB ( 3.79%) for other data</span><br><span class="line">    [creator]       73.65MB in total</span><br><span class="line">    [creator]     --------------------------------------------------------------------------------</span><br><span class="line">    [creator]     Top 10 packages in code area:           Top 10 object types in image heap:</span><br><span class="line">    [creator]        1.63MB sun.security.ssl                 7.45MB byte[] for code metadata</span><br><span class="line">    [creator]        1.06MB java.util                        6.03MB byte[] for embedded resources</span><br><span class="line">    [creator]      827.16KB java.lang.invoke                 3.74MB java.lang.Class</span><br><span class="line">    [creator]      718.01KB com.sun.crypto.provider          3.50MB java.lang.String</span><br><span class="line">    [creator]      541.01KB org.apache.catalina.core         3.11MB byte[] for general heap data</span><br><span class="line">    [creator]      499.54KB org.apache.tomcat.util.net       2.86MB byte[] for java.lang.String</span><br><span class="line">    [creator]      490.49KB org.apache.coyote.http2          1.32MB c.o.s.c.h.DynamicHubCompanion</span><br><span class="line">    [creator]      472.92KB java.lang                      835.87KB byte[] for reflection metadata</span><br><span class="line">    [creator]      470.23KB c.s.o.a.xerces.internal.impl   679.55KB java.lang.String[]</span><br><span class="line">    [creator]      461.63KB sun.security.x509              607.22KB java.util.HashMap$Node</span><br><span class="line">    [creator]       26.41MB for 658 more packages            6.10MB for 3120 more object types</span><br><span class="line">    [creator]     --------------------------------------------------------------------------------</span><br><span class="line">    [creator]       164.1s (29.2% of total time) in 257 GCs | Peak RSS: 1.74GB | CPU load: 1.44</span><br><span class="line">    [creator]     --------------------------------------------------------------------------------</span><br><span class="line">    [creator]     Produced artifacts:</span><br><span class="line">    [creator]      /layers/paketo-buildpacks_native-image/native-image/pers.james.practice.springboog3.Application (executable)</span><br><span class="line">    [creator]      /layers/paketo-buildpacks_native-image/native-image/pers.james.practice.springboog3.Application.build_artifacts.txt (txt)</span><br><span class="line">    [creator]     ================================================================================</span><br><span class="line">    [creator]     Finished generating &#x27;/layers/paketo-buildpacks_native-image/native-image/pers.james.practice.springboog3.Application&#x27; in 9m 20s.</span><br><span class="line">    [creator]       Removing bytecode</span><br><span class="line">    [creator]       Process types:</span><br><span class="line">    [creator]         native-image: /workspace/pers.james.practice.springboog3.Application (direct)</span><br><span class="line">    [creator]         task:         /workspace/pers.james.practice.springboog3.Application (direct)</span><br><span class="line">    [creator]         web:          /workspace/pers.james.practice.springboog3.Application (direct)</span><br><span class="line">    [creator]     ===&gt; EXPORTING</span><br><span class="line">    [creator]     Adding layer &#x27;paketo-buildpacks/ca-certificates:helper&#x27;</span><br><span class="line">    [creator]     Adding layer &#x27;launch.sbom&#x27;</span><br><span class="line">    [creator]     Adding 1/1 app layer(s)</span><br><span class="line">    [creator]     Adding layer &#x27;launcher&#x27;</span><br><span class="line">    [creator]     Adding layer &#x27;config&#x27;</span><br><span class="line">    [creator]     Adding layer &#x27;process-types&#x27;</span><br><span class="line">    [creator]     Adding label &#x27;io.buildpacks.lifecycle.metadata&#x27;</span><br><span class="line">    [creator]     Adding label &#x27;io.buildpacks.build.metadata&#x27;</span><br><span class="line">    [creator]     Adding label &#x27;io.buildpacks.project.metadata&#x27;</span><br><span class="line">    [creator]     Adding label &#x27;org.springframework.boot.version&#x27;</span><br><span class="line">    [creator]     Setting default process type &#x27;web&#x27;</span><br><span class="line">    [creator]     Saving docker.io/library/springboot3:1.0.0...</span><br><span class="line">    [creator]     *** Images (12137cda1f20):</span><br><span class="line">    [creator]           docker.io/library/springboot3:1.0.0</span><br><span class="line">    [creator]     Adding cache layer &#x27;paketo-buildpacks/bellsoft-liberica:native-image-svm&#x27;</span><br><span class="line">    [creator]     Adding cache layer &#x27;paketo-buildpacks/syft:syft&#x27;</span><br><span class="line">    [creator]     Adding cache layer &#x27;paketo-buildpacks/native-image:native-image&#x27;</span><br><span class="line">    [creator]     Adding cache layer &#x27;cache.sbom&#x27;</span><br><span class="line"></span><br><span class="line">Successfully built image &#x27;docker.io/library/springboot3:1.0.0&#x27;</span><br><span class="line"></span><br><span class="line">Persisted dependency lock state for project &#x27;:springboot3&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>整个任务执行，比较耗时，11min。</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9u94ab5j30y40243yz.jpg" alt="image-20221123191110653"></p>
<p>然后在本机上，可以看到一个docker images</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8f9y5lyhfj31e2036js3.jpg" alt="image-20221123191454288"></p>
<p>启动docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -p 8080:8080 docker.io/library/springboot3:1.0.0</span><br></pre></td></tr></table></figure>

<p>SpringBoot启动日志，启动速度非常快</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::            (v3.0.0-RC2)</span><br><span class="line"></span><br><span class="line">2022-11-23T10:16:08.247Z  INFO 1 --- [           main] p.j.practice.springboog3.Application     : Starting AOT-processed Application using Java 17.0.5 with PID 1 (/workspace/pers.james.practice.springboog3.Application started by cnb in /workspace)</span><br><span class="line">2022-11-23T10:16:08.247Z  INFO 1 --- [           main] p.j.practice.springboog3.Application     : No active profile set, falling back to 1 default profile: &quot;default&quot;</span><br><span class="line">2022-11-23T10:16:08.260Z  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br><span class="line">2022-11-23T10:16:08.261Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2022-11-23T10:16:08.261Z  INFO 1 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]</span><br><span class="line">2022-11-23T10:16:08.265Z  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2022-11-23T10:16:08.265Z  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 18 ms</span><br><span class="line">2022-11-23T10:16:08.295Z  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br><span class="line">2022-11-23T10:16:08.296Z  INFO 1 --- [           main] p.j.practice.springboog3.Application     : Started Application in 0.058 seconds (process running for 0.07)</span><br></pre></td></tr></table></figure>

<p>系统占用内存，也非常低，使用docker stats观察docker占用内存。</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8fa24m6avj318w03eq3h.jpg" alt="image-20221123191842004"></p>
<p>访问API接口</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8fa3oyp8sj30ou01yjrh.jpg" alt="image-20221123192016526"></p>
<p>后台日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2022-11-23T10:16:37.488Z  INFO 1 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2022-11-23T10:16:37.488Z  INFO 1 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2022-11-23T10:16:37.488Z  INFO 1 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms</span><br></pre></td></tr></table></figure>

<p>另外build目录下，也会产生aot相关目录和编译中间结果</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGgy1h8g6book3lj30su172gro.jpg" alt="image-20221124135457623"></p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/3.0.0-RC2/reference/htmlsingle/#native-image.developing-your-first-application.buildpacks.gradle">SpringBoot官网-GraalVM Native Image Support Gradle</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/3.0.0-RC2/gradle-plugin/reference/htmlsingle/#aot">SpringBoot官网-gradle-plugin</a></p>
<p><a target="_blank" rel="noopener" href="https://www.graalvm.org/22.0/reference-manual/native-image/BuildOutput/">GraalVM-Build-Output</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SpringBoot3/" rel="tag"># SpringBoot3</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/09/19/SOFAJRaft%E5%85%83%E4%BF%A1%E6%81%AFMeta%E5%AD%98%E5%82%A8%E5%88%86%E6%9E%90/" rel="prev" title="SOFAJRaft元信息Meta存储分析">
      <i class="fa fa-chevron-left"></i> SOFAJRaft元信息Meta存储分析
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE"><span class="nav-number">1.</span> <span class="nav-text">工程配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%BD%AE%E8%A6%81%E6%B1%82"><span class="nav-number">1.1.</span> <span class="nav-text">前置要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE-1"><span class="nav-number">1.2.</span> <span class="nav-text">工程配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="nav-number">2.</span> <span class="nav-text">参考文档</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhan Hao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhan Hao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
