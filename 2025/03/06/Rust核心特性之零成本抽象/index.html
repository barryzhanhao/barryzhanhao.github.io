<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="一、Rust核心特性Rust 作为一门系统级编程语言，强调安全性、并发性和高性能，同时避免了手动内存管理的复杂性。以下是 Rust 的核心特性： 1. 内存安全（Memory Safety）Rust 没有垃圾回收（GC），但通过 所有权（Ownership） 机制保证内存安全：  所有权（Ownership）：每个值在某一时刻只能有一个“所有者”。  借用（Borrowing）：可以通过 &amp;amp">
<meta property="og:type" content="article">
<meta property="og:title" content="Rust核心特性之零成本抽象">
<meta property="og:url" content="http://example.com/2025/03/06/Rust%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E4%B9%8B%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1/index.html">
<meta property="og:site_name" content="Zhan Hao&#39;s Blogs">
<meta property="og:description" content="一、Rust核心特性Rust 作为一门系统级编程语言，强调安全性、并发性和高性能，同时避免了手动内存管理的复杂性。以下是 Rust 的核心特性： 1. 内存安全（Memory Safety）Rust 没有垃圾回收（GC），但通过 所有权（Ownership） 机制保证内存安全：  所有权（Ownership）：每个值在某一时刻只能有一个“所有者”。  借用（Borrowing）：可以通过 &amp;amp">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-03-06T06:46:19.000Z">
<meta property="article:modified_time" content="2025-03-06T09:42:10.319Z">
<meta property="article:author" content="Zhan Hao">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/03/06/Rust%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E4%B9%8B%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Rust核心特性之零成本抽象 | Zhan Hao's Blogs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zhan Hao's Blogs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/03/06/Rust%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7%E4%B9%8B%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhan Hao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhan Hao's Blogs">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Rust核心特性之零成本抽象
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-03-06 14:46:19 / Modified: 17:42:10" itemprop="dateCreated datePublished" datetime="2025-03-06T14:46:19+08:00">2025-03-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="一、Rust核心特性"><a href="#一、Rust核心特性" class="headerlink" title="一、Rust核心特性"></a>一、Rust核心特性</h1><p>Rust 作为一门<strong>系统级编程语言</strong>，强调<strong>安全性、并发性和高性能</strong>，同时避免了手动内存管理的复杂性。以下是 Rust 的核心特性：</p>
<h2 id="1-内存安全（Memory-Safety）"><a href="#1-内存安全（Memory-Safety）" class="headerlink" title="1. 内存安全（Memory Safety）"></a><strong>1. 内存安全（Memory Safety）</strong></h2><p>Rust <strong>没有垃圾回收（GC）</strong>，但通过 <strong>所有权（Ownership）</strong> 机制保证内存安全：</p>
<ul>
<li><p><strong>所有权（Ownership）</strong>：每个值在某一时刻只能有一个“所有者”。</p>
</li>
<li><p><strong>借用（Borrowing）</strong>：可以通过 &amp;（不可变借用）或 &amp;mut（可变借用）访问数据，但必须遵循</p>
<p>借用规则：</p>
<ol>
<li><strong>只能有一个可变借用</strong> 或者 <strong>多个不可变借用</strong>。</li>
<li><strong>借用不能超出所有者的生命周期</strong>。</li>
</ol>
</li>
<li><p><strong>生命周期（Lifetimes）</strong>：确保引用不会变成“悬垂引用”（Dangling Reference）。</p>
</li>
</ul>
<h2 id="2-零成本抽象（Zero-Cost-Abstraction）"><a href="#2-零成本抽象（Zero-Cost-Abstraction）" class="headerlink" title="2. 零成本抽象（Zero-Cost Abstraction）"></a><strong>2. 零成本抽象（Zero-Cost Abstraction）</strong></h2><p>Rust 提供了<strong>高级抽象（泛型、trait、迭代器等）</strong>，但不会产生额外的运行时开销：</p>
<ul>
<li><strong>泛型（Generics）</strong> 使用 <strong>单态化（Monomorphization）</strong> 机制，在编译时生成具体类型的代码。</li>
<li><strong>迭代器（Iterator）</strong> 采用惰性计算，避免创建临时集合，提高性能。</li>
<li><strong>静态分派</strong> 使 <code>trait</code> 在编译时绑定，避免虚表（vtable）调用。</li>
</ul>
<h2 id="3-无数据竞争的并发（Fearless-Concurrency）"><a href="#3-无数据竞争的并发（Fearless-Concurrency）" class="headerlink" title="3. 无数据竞争的并发（Fearless Concurrency）"></a><strong>3. 无数据竞争的并发（Fearless Concurrency）</strong></h2><p>Rust 通过 <strong>线程安全的类型系统</strong>，让编译器在编译时检查数据竞争：</p>
<ul>
<li><code>Send</code>：类型可以在线程间转移所有权。</li>
<li><code>Sync</code>：类型可以安全地在多个线程间共享。</li>
<li><code>Mutex&lt;T&gt;</code>、<code>RwLock&lt;T&gt;</code>：提供<strong>互斥锁</strong>和<strong>读写锁</strong>来安全访问共享数据。</li>
<li><code>Arc&lt;T&gt;</code>（原子引用计数）：用于在多个线程间安全共享数据。</li>
</ul>
<h2 id="4-强类型系统（Strong-Type-System）"><a href="#4-强类型系统（Strong-Type-System）" class="headerlink" title="4. 强类型系统（Strong Type System）"></a><strong>4. 强类型系统（Strong Type System）</strong></h2><p>Rust 采用<strong>静态类型检查</strong>，减少运行时错误：</p>
<ul>
<li><strong>枚举（Enum）</strong> 和 <strong>模式匹配（Pattern Matching）</strong> 让代码更安全。</li>
<li><strong>Option<T></strong> 取代空指针，避免 <code>NullPointerException</code>。</li>
<li><strong>Result&lt;T, E&gt;</strong> 取代异常处理，强制开发者显式处理错误。</li>
</ul>
<h2 id="5-高效的错误处理"><a href="#5-高效的错误处理" class="headerlink" title="5. 高效的错误处理"></a><strong>5. 高效的错误处理</strong></h2><p>Rust 不使用 <strong>try-catch</strong> 这样的异常机制，而是使用 <code>Result&lt;T, E&gt;</code>：</p>
<ul>
<li><strong>显式错误处理</strong></li>
<li><strong>组合方法（? 操作符）</strong> 让代码更简洁</li>
</ul>
<h2 id="6-WebAssembly-支持"><a href="#6-WebAssembly-支持" class="headerlink" title="6. WebAssembly 支持"></a><strong>6. WebAssembly 支持</strong></h2><p>Rust 可以编译成 <strong>WebAssembly（Wasm）</strong>，用于<strong>高性能 Web 开发</strong></p>
<h2 id="7-现代工具链"><a href="#7-现代工具链" class="headerlink" title="7. 现代工具链"></a><strong>7. 现代工具链</strong></h2><p>Rust 提供强大的开发工具：</p>
<ul>
<li><strong>Cargo</strong>：包管理器 + 构建工具</li>
<li><strong>Rustfmt</strong>：代码格式化工具</li>
<li><strong>Clippy</strong>：静态分析工具，提供代码优化建议</li>
<li><strong>rust-analyzer</strong>：智能补全、代码导航支持</li>
</ul>
<h2 id="8-安全的-FFI（Foreign-Function-Interface）"><a href="#8-安全的-FFI（Foreign-Function-Interface）" class="headerlink" title="8. 安全的 FFI（Foreign Function Interface）"></a><strong>8. 安全的 FFI（Foreign Function Interface）</strong></h2><p>Rust 提供<strong>安全的 C 语言绑定</strong>，用于与 C/C++ 交互</p>
<h1 id="二、零成本抽象"><a href="#二、零成本抽象" class="headerlink" title="二、零成本抽象"></a>二、零成本抽象</h1><h2 id="1-泛型（Monomorphization）"><a href="#1-泛型（Monomorphization）" class="headerlink" title="1. 泛型（Monomorphization）"></a>1. 泛型（Monomorphization）</h2><p>Rust 通过<strong>单态化（monomorphization）</strong>将泛型代码在编译时展开为具体的类型。例如：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">add</span></span>&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(a: T, b: T) -&gt; T &#123;</span><br><span class="line">    a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 这里会生成针对 i32 的 add 函数</span></span><br><span class="line">    <span class="keyword">let</span> y = add(<span class="number">1.5</span>, <span class="number">2.5</span>); <span class="comment">// 这里会生成针对 f64 的 add 函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译后，Rust 会针对不同的类型生成特定的版本，而不会引入额外的动态分发开销。</p>
<p>如何验证？下面通过查看 LLVM IR（中间代码）来验证，LLVM IR 是 Rust 代码编译成机器码之前的中间表示，类似于汇编但更可读。</p>
<p>执行以下命令生成 LLVM IR</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc --emit=llvm-ir ./src/main.rs  </span><br></pre></td></tr></table></figure>

<p>这将在当前目录下生成一个 <code>main.ll</code> 文件，其中包含 LLVM IR 代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line">; ModuleID = &#x27;main.74b210b97947ca2d-cgu.0&#x27;</span><br><span class="line">source_filename = &quot;main.74b210b97947ca2d-cgu.0&quot;</span><br><span class="line">target datalayout = &quot;e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128&quot;</span><br><span class="line">target triple = &quot;x86_64-apple-macosx10.12.0&quot;</span><br><span class="line"></span><br><span class="line">%&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot; = type &#123; %&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; &#125;</span><br><span class="line">%&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; = type &#123; ptr, [1 x i64] &#125;</span><br><span class="line"></span><br><span class="line">@vtable.0 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr, ptr, ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot; &#125;&gt;, align 8</span><br><span class="line">@0 = private unnamed_addr constant &lt;&#123; [8 x i8], [8 x i8] &#125;&gt; &lt;&#123; [8 x i8] zeroinitializer, [8 x i8] undef &#125;&gt;, align 8</span><br><span class="line">@alloc_1a75b0218f3e027a684428f41d4202ae = private unnamed_addr constant &lt;&#123; [13 x i8] &#125;&gt; &lt;&#123; [13 x i8] c&quot;./src/main.rs&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_1dc382dacd1c11bc7656425407896263 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\02\00\00\00\05\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_ca7bbfc6225cdaaedf079a46016a8acb = private unnamed_addr constant &lt;&#123; [2 x i8] &#125;&gt; &lt;&#123; [2 x i8] c&quot;x:&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_00ad7d2b019726c08ecfae7a3cd0a0b3 = private unnamed_addr constant &lt;&#123; [3 x i8] &#125;&gt; &lt;&#123; [3 x i8] c&quot;,y:&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_49a1e817e911805af64bbc7efb390101 = private unnamed_addr constant &lt;&#123; [1 x i8] &#125;&gt; &lt;&#123; [1 x i8] c&quot;\0A&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_40b8368bc04921e50cd259c4f4b1c00d = private unnamed_addr constant &lt;&#123; ptr, [8 x i8], ptr, [8 x i8], ptr, [8 x i8] &#125;&gt; &lt;&#123; ptr @alloc_ca7bbfc6225cdaaedf079a46016a8acb, [8 x i8] c&quot;\02\00\00\00\00\00\00\00&quot;, ptr @alloc_00ad7d2b019726c08ecfae7a3cd0a0b3, [8 x i8] c&quot;\03\00\00\00\00\00\00\00&quot;, ptr @alloc_49a1e817e911805af64bbc7efb390101, [8 x i8] c&quot;\01\00\00\00\00\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define hidden i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr %main, i64 %argc, ptr %argv, i8 %sigpipe) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_8 = alloca [8 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %main, ptr %_8, align 8</span><br><span class="line">; call std::rt::lang_start_internal</span><br><span class="line">  %0 = call i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1 %_8, ptr align 8 @vtable.0, i64 %argc, ptr %argv, i8 %sigpipe)</span><br><span class="line">  store i64 %0, ptr %_5, align 8</span><br><span class="line">  %v = load i64, ptr %_5, align 8</span><br><span class="line">  ret i64 %v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %self = alloca [1 x i8], align 1</span><br><span class="line">  %_4 = load ptr, ptr %_1, align 8</span><br><span class="line">; call std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">  call void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %_4)</span><br><span class="line">; call &lt;() as std::process::Termination&gt;::report</span><br><span class="line">  %0 = call i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;()</span><br><span class="line">  store i8 %0, ptr %self, align 1</span><br><span class="line">  %_6 = load i8, ptr %self, align 1</span><br><span class="line">  %_0 = zext i8 %_6 to i32</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">; Function Attrs: noinline uwtable</span><br><span class="line">define internal void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %f) unnamed_addr #2 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  call void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %f)</span><br><span class="line">  call void asm sideeffect &quot;&quot;, &quot;~&#123;memory&#125;&quot;(), !srcloc !3</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;f64 as core::ops::arith::Add&gt;::add</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal double @&quot;_ZN45_$LT$f64$u20$as$u20$core..ops..arith..Add$GT$3add17hee889172a330a657E&quot;(double %self, double %other, ptr align 8 %0) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_0 = fadd double %self, %other</span><br><span class="line">  ret double %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::ops::arith::Add&gt;::add</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN45_$LT$i32$u20$as$u20$core..ops..arith..Add$GT$3add17he854cc45a8820bacE&quot;(i32 %self, i32 %other, ptr align 8 %0) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %self, i32 %other)</span><br><span class="line">  %_3.0 = extractvalue &#123; i32, i1 &#125; %1, 0</span><br><span class="line">  %_3.1 = extractvalue &#123; i32, i1 &#125; %1, 1</span><br><span class="line">  br i1 %_3.1, label %panic, label %bb1</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_3.0</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %start</span><br><span class="line">; call core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8 %0) #8</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::fmt::Arguments::new_v1</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3fmt9Arguments6new_v117h59d42c0fe4d96735E(ptr sret([48 x i8]) align 8 %_0, ptr align 8 %pieces, ptr align 8 %args) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  store ptr %pieces, ptr %_0, align 8</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i64 3, ptr %0, align 8</span><br><span class="line">  %1 = load ptr, ptr @0, align 8</span><br><span class="line">  %2 = load i64, ptr getelementptr inbounds (i8, ptr @0, i64 8), align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_0, i64 32</span><br><span class="line">  store ptr %1, ptr %3, align 8</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %3, i64 8</span><br><span class="line">  store i64 %2, ptr %4, align 8</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %_0, i64 16</span><br><span class="line">  store ptr %args, ptr %5, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %5, i64 8</span><br><span class="line">  store i64 2, ptr %6, align 8</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once&#123;&#123;vtable.shim&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %0 = load ptr, ptr %_1, align 8</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  %_0 = call i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  call void %_1()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %_1 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %0, ptr %_1, align 8</span><br><span class="line">; invoke std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load ptr, ptr %1, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %4 = load i32, ptr %3, align 8</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; poison, ptr %2, 0</span><br><span class="line">  %6 = insertvalue &#123; ptr, i32 &#125; %5, i32 %4, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %7 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %7, 0</span><br><span class="line">  %9 = extractvalue &#123; ptr, i32 &#125; %7, 1</span><br><span class="line">  store ptr %8, ptr %1, align 8</span><br><span class="line">  %10 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %9, ptr %10, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;std::rt::lang_start&lt;()&gt;::&#123;&#123;closure&#125;&#125;&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr85drop_in_place$LT$std..rt..lang_start$LT$$LP$$RP$$GT$..$u7b$$u7b$closure$u7d$$u7d$$GT$17hb322fcffbb433df1E&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;() as std::process::Termination&gt;::report</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i8 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::add</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal i32 @_ZN4main3add17h3be4fb0e38b46cdeE(i32 %a, i32 %b) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;i32 as core::ops::arith::Add&gt;::add</span><br><span class="line">  %_0 = call i32 @&quot;_ZN45_$LT$i32$u20$as$u20$core..ops..arith..Add$GT$3add17he854cc45a8820bacE&quot;(i32 %a, i32 %b, ptr align 8 @alloc_1dc382dacd1c11bc7656425407896263)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::add</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal double @_ZN4main3add17ha23cfb5ea3a42838E(double %a, double %b) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;f64 as core::ops::arith::Add&gt;::add</span><br><span class="line">  %_0 = call double @&quot;_ZN45_$LT$f64$u20$as$u20$core..ops..arith..Add$GT$3add17hee889172a330a657E&quot;(double %a, double %b, ptr align 8 @alloc_1dc382dacd1c11bc7656425407896263)</span><br><span class="line">  ret double %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3.i1 = alloca [16 x i8], align 8</span><br><span class="line">  %_3.i = alloca [16 x i8], align 8</span><br><span class="line">  %_10 = alloca [16 x i8], align 8</span><br><span class="line">  %_8 = alloca [16 x i8], align 8</span><br><span class="line">  %_7 = alloca [32 x i8], align 8</span><br><span class="line">  %_4 = alloca [48 x i8], align 8</span><br><span class="line">  %y = alloca [8 x i8], align 8</span><br><span class="line">  %x = alloca [4 x i8], align 4</span><br><span class="line">; call main::add</span><br><span class="line">  %0 = call i32 @_ZN4main3add17h3be4fb0e38b46cdeE(i32 1, i32 2)</span><br><span class="line">  store i32 %0, ptr %x, align 4</span><br><span class="line">; call main::add</span><br><span class="line">  %1 = call double @_ZN4main3add17ha23cfb5ea3a42838E(double 1.500000e+00, double 2.500000e+00)</span><br><span class="line">  store double %1, ptr %y, align 8</span><br><span class="line">  store ptr %x, ptr %_3.i1, align 8</span><br><span class="line">  %2 = getelementptr inbounds i8, ptr %_3.i1, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;, ptr %2, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_8, ptr align 8 %_3.i1, i64 16, i1 false)</span><br><span class="line">  store ptr %y, ptr %_3.i, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_3.i, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt5float52_$LT$impl$u20$core..fmt..Display$u20$for$u20$f64$GT$3fmt17h726e5bbbae5b9818E&quot;, ptr %3, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_10, ptr align 8 %_3.i, i64 16, i1 false)</span><br><span class="line">  %4 = getelementptr inbounds [2 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_7, i64 0, i64 0</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %4, ptr align 8 %_8, i64 16, i1 false)</span><br><span class="line">  %5 = getelementptr inbounds [2 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_7, i64 0, i64 1</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %5, ptr align 8 %_10, i64 16, i1 false)</span><br><span class="line">; call core::fmt::Arguments::new_v1</span><br><span class="line">  call void @_ZN4core3fmt9Arguments6new_v117h59d42c0fe4d96735E(ptr sret([48 x i8]) align 8 %_4, ptr align 8 @alloc_40b8368bc04921e50cd259c4f4b1c00d, ptr align 8 %_7)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_4)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start_internal</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1, ptr align 8, i64, ptr, i8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nosync nounwind speculatable willreturn memory(none)</span><br><span class="line">declare &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32, i32) #3</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8) unnamed_addr #4</span><br><span class="line"></span><br><span class="line">; core::fmt::float::&lt;impl core::fmt::Display for f64&gt;::fmt</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare zeroext i1 @&quot;_ZN4core3fmt5float52_$LT$impl$u20$core..fmt..Display$u20$for$u20$f64$GT$3fmt17h726e5bbbae5b9818E&quot;(ptr align 8, ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)</span><br><span class="line">declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #5</span><br><span class="line"></span><br><span class="line">; core::fmt::num::imp::&lt;impl core::fmt::Display for i32&gt;::fmt</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare zeroext i1 @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;(ptr align 4, ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">declare i32 @rust_eh_personality(i32, i32, i64, ptr, ptr) unnamed_addr #6</span><br><span class="line"></span><br><span class="line">; std::io::stdio::_print</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">define i32 @main(i32 %0, ptr %1) unnamed_addr #7 &#123;</span><br><span class="line">top:</span><br><span class="line">  %2 = sext i32 %0 to i64</span><br><span class="line">; call std::rt::lang_start</span><br><span class="line">  %3 = call i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr @_ZN4main4main17h3df54791b8d52a26E, i64 %2, ptr %1, i8 0)</span><br><span class="line">  %4 = trunc i64 %3 to i32</span><br><span class="line">  ret i32 %4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attributes #0 = &#123; uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #1 = &#123; inlinehint uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #2 = &#123; noinline uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #3 = &#123; nocallback nofree nosync nounwind speculatable willreturn memory(none) &#125;</span><br><span class="line">attributes #4 = &#123; cold noinline noreturn uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #5 = &#123; nocallback nofree nounwind willreturn memory(argmem: readwrite) &#125;</span><br><span class="line">attributes #6 = &#123; nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #7 = &#123; &quot;frame-pointer&quot;=&quot;all&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #8 = &#123; noreturn &#125;</span><br><span class="line"></span><br><span class="line">!llvm.module.flags = !&#123;!0, !1&#125;</span><br><span class="line">!llvm.ident = !&#123;!2&#125;</span><br><span class="line"></span><br><span class="line">!0 = !&#123;i32 8, !&quot;PIC Level&quot;, i32 2&#125;</span><br><span class="line">!1 = !&#123;i32 7, !&quot;PIE Level&quot;, i32 2&#125;</span><br><span class="line">!2 = !&#123;!&quot;rustc version 1.83.0 (90b35a623 2024-11-26)&quot;&#125;</span><br><span class="line">!3 = !&#123;i32 1941625&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重点是add方法的定义和调用，在ll文件的172~188行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">; main::add</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal i32 @_ZN4main3add17h3be4fb0e38b46cdeE(i32 %a, i32 %b) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;i32 as core::ops::arith::Add&gt;::add</span><br><span class="line">  %_0 = call i32 @&quot;_ZN45_$LT$i32$u20$as$u20$core..ops..arith..Add$GT$3add17he854cc45a8820bacE&quot;(i32 %a, i32 %b, ptr align 8 @alloc_1dc382dacd1c11bc7656425407896263)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::add</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal double @_ZN4main3add17ha23cfb5ea3a42838E(double %a, double %b) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;f64 as core::ops::arith::Add&gt;::add</span><br><span class="line">  %_0 = call double @&quot;_ZN45_$LT$f64$u20$as$u20$core..ops..arith..Add$GT$3add17hee889172a330a657E&quot;(double %a, double %b, ptr align 8 @alloc_1dc382dacd1c11bc7656425407896263)</span><br><span class="line">  ret double %_0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分别，调用了 <code>core::ops::arith::Add</code> 的 <code>add</code> 方法。</p>
<h2 id="2-Trait-的静态分发（Static-Dispatch）"><a href="#2-Trait-的静态分发（Static-Dispatch）" class="headerlink" title="2. Trait 的静态分发（Static Dispatch）"></a>2. <strong>Trait 的静态分发（Static Dispatch）</strong></h2><p>Rust 的 trait 默认使用<strong>静态分发（static dispatch）</strong>，在编译时解析，并不会有额外的间接调用开销。例如：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Speak</span></span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">speak</span></span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Dog</span></span>;</span><br><span class="line"><span class="keyword">impl</span> Speak <span class="keyword">for</span> Dog &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">speak</span></span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Woof!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">make_speak</span></span>&lt;T: Speak&gt;(animal: T) &#123;</span><br><span class="line">    animal.speak();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> dog = Dog;</span><br><span class="line">    make_speak(dog); <span class="comment">// 编译器会将 `make_speak::&lt;Dog&gt;` 直接内联展开</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于 <code>make_speak</code> 是泛型函数，它会在编译时展开为 <code>Dog</code> 类型的专门实现，而不是通过虚表（vtable）进行动态调用，因此没有运行时开销。</p>
<p>LLVM IR文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">; ModuleID = &#x27;main.74b210b97947ca2d-cgu.0&#x27;</span><br><span class="line">source_filename = &quot;main.74b210b97947ca2d-cgu.0&quot;</span><br><span class="line">target datalayout = &quot;e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128&quot;</span><br><span class="line">target triple = &quot;x86_64-apple-macosx10.12.0&quot;</span><br><span class="line"></span><br><span class="line">@vtable.0 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr, ptr, ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot; &#125;&gt;, align 8</span><br><span class="line">@0 = private unnamed_addr constant &lt;&#123; [8 x i8], [8 x i8] &#125;&gt; &lt;&#123; [8 x i8] zeroinitializer, [8 x i8] undef &#125;&gt;, align 8</span><br><span class="line">@alloc_d3d8effda880de431d7f9eb7fb819220 = private unnamed_addr constant &lt;&#123; [6 x i8] &#125;&gt; &lt;&#123; [6 x i8] c&quot;Woof!\0A&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_6a2f522e5acc171011a2c43a0f2bf5c0 = private unnamed_addr constant &lt;&#123; ptr, [8 x i8] &#125;&gt; &lt;&#123; ptr @alloc_d3d8effda880de431d7f9eb7fb819220, [8 x i8] c&quot;\06\00\00\00\00\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define hidden i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr %main, i64 %argc, ptr %argv, i8 %sigpipe) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_8 = alloca [8 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %main, ptr %_8, align 8</span><br><span class="line">; call std::rt::lang_start_internal</span><br><span class="line">  %0 = call i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1 %_8, ptr align 8 @vtable.0, i64 %argc, ptr %argv, i8 %sigpipe)</span><br><span class="line">  store i64 %0, ptr %_5, align 8</span><br><span class="line">  %v = load i64, ptr %_5, align 8</span><br><span class="line">  ret i64 %v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %self = alloca [1 x i8], align 1</span><br><span class="line">  %_4 = load ptr, ptr %_1, align 8</span><br><span class="line">; call std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">  call void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %_4)</span><br><span class="line">; call &lt;() as std::process::Termination&gt;::report</span><br><span class="line">  %0 = call i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;()</span><br><span class="line">  store i8 %0, ptr %self, align 1</span><br><span class="line">  %_6 = load i8, ptr %self, align 1</span><br><span class="line">  %_0 = zext i8 %_6 to i32</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">; Function Attrs: noinline uwtable</span><br><span class="line">define internal void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %f) unnamed_addr #2 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  call void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %f)</span><br><span class="line">  call void asm sideeffect &quot;&quot;, &quot;~&#123;memory&#125;&quot;(), !srcloc !3</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::fmt::Arguments::new_const</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_0, ptr align 8 %pieces) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  store ptr %pieces, ptr %_0, align 8</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i64 1, ptr %0, align 8</span><br><span class="line">  %1 = load ptr, ptr @0, align 8</span><br><span class="line">  %2 = load i64, ptr getelementptr inbounds (i8, ptr @0, i64 8), align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_0, i64 32</span><br><span class="line">  store ptr %1, ptr %3, align 8</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %3, i64 8</span><br><span class="line">  store i64 %2, ptr %4, align 8</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %_0, i64 16</span><br><span class="line">  store ptr inttoptr (i64 8 to ptr), ptr %5, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %5, i64 8</span><br><span class="line">  store i64 0, ptr %6, align 8</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once&#123;&#123;vtable.shim&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %0 = load ptr, ptr %_1, align 8</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  %_0 = call i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  call void %_1()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %_1 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %0, ptr %_1, align 8</span><br><span class="line">; invoke std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load ptr, ptr %1, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %4 = load i32, ptr %3, align 8</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; poison, ptr %2, 0</span><br><span class="line">  %6 = insertvalue &#123; ptr, i32 &#125; %5, i32 %4, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %7 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %7, 0</span><br><span class="line">  %9 = extractvalue &#123; ptr, i32 &#125; %7, 1</span><br><span class="line">  store ptr %8, ptr %1, align 8</span><br><span class="line">  %10 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %9, ptr %10, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;std::rt::lang_start&lt;()&gt;::&#123;&#123;closure&#125;&#125;&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr85drop_in_place$LT$std..rt..lang_start$LT$$LP$$RP$$GT$..$u7b$$u7b$closure$u7d$$u7d$$GT$17hb322fcffbb433df1E&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;() as std::process::Termination&gt;::report</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i8 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = alloca [48 x i8], align 8</span><br><span class="line">; call core::fmt::Arguments::new_const</span><br><span class="line">  call void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_3, ptr align 8 @alloc_6a2f522e5acc171011a2c43a0f2bf5c0)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_3)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::make_speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main10make_speak17h8673d5a486092ce9E() unnamed_addr #0 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [16 x i8], align 8</span><br><span class="line">  %animal = alloca [0 x i8], align 1</span><br><span class="line">; invoke &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">  invoke void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %animal)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %1 = load ptr, ptr %0, align 8</span><br><span class="line">  %2 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  %3 = load i32, ptr %2, align 8</span><br><span class="line">  %4 = insertvalue &#123; ptr, i32 &#125; poison, ptr %1, 0</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; %4, i32 %3, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %5</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %6 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %7 = extractvalue &#123; ptr, i32 &#125; %6, 0</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %6, 1</span><br><span class="line">  store ptr %7, ptr %0, align 8</span><br><span class="line">  %9 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  store i32 %8, ptr %9, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call main::make_speak</span><br><span class="line">  call void @_ZN4main10make_speak17h8673d5a486092ce9E()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start_internal</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1, ptr align 8, i64, ptr, i8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">declare i32 @rust_eh_personality(i32, i32, i64, ptr, ptr) unnamed_addr #3</span><br><span class="line"></span><br><span class="line">; std::io::stdio::_print</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">define i32 @main(i32 %0, ptr %1) unnamed_addr #4 &#123;</span><br><span class="line">top:</span><br><span class="line">  %2 = sext i32 %0 to i64</span><br><span class="line">; call std::rt::lang_start</span><br><span class="line">  %3 = call i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr @_ZN4main4main17h3df54791b8d52a26E, i64 %2, ptr %1, i8 0)</span><br><span class="line">  %4 = trunc i64 %3 to i32</span><br><span class="line">  ret i32 %4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attributes #0 = &#123; uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #1 = &#123; inlinehint uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #2 = &#123; noinline uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #3 = &#123; nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #4 = &#123; &quot;frame-pointer&quot;=&quot;all&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line"></span><br><span class="line">!llvm.module.flags = !&#123;!0, !1&#125;</span><br><span class="line">!llvm.ident = !&#123;!2&#125;</span><br><span class="line"></span><br><span class="line">!0 = !&#123;i32 8, !&quot;PIC Level&quot;, i32 2&#125;</span><br><span class="line">!1 = !&#123;i32 7, !&quot;PIE Level&quot;, i32 2&#125;</span><br><span class="line">!2 = !&#123;!&quot;rustc version 1.83.0 (90b35a623 2024-11-26)&quot;&#125;</span><br><span class="line">!3 = !&#123;i32 1778714&#125;</span><br></pre></td></tr></table></figure>

<p>核心逻辑在139~149，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#Dog，speak方法的定义</span><br><span class="line"></span><br><span class="line">; &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = alloca [48 x i8], align 8</span><br><span class="line">; call core::fmt::Arguments::new_const</span><br><span class="line">  call void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_3, ptr align 8 @alloc_6a2f522e5acc171011a2c43a0f2bf5c0)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_3)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#main方法直接调用的Dog的speak，而不是实现T: Speak的Animal</span><br><span class="line"></span><br><span class="line">; main::make_speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main10make_speak17h8673d5a486092ce9E() unnamed_addr #0 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [16 x i8], align 8</span><br><span class="line">  %animal = alloca [0 x i8], align 1</span><br><span class="line">; invoke &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">  invoke void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %animal)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br></pre></td></tr></table></figure>

<p>因为 <code>make_speak::&lt;Dog&gt;</code> 直接展开为具体函数，调用 <code>animal.speak()</code> 没有运行时的虚表（vtable）查找，所以性能会更好</p>
<p><strong>静态分发 vs. 动态分发</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>静态分发（static dispatch）</th>
<th>动态分发（dynamic dispatch）</th>
</tr>
</thead>
<tbody><tr>
<td><strong>调用方式</strong></td>
<td><strong>编译期确定</strong>，直接调用具体实现</td>
<td><strong>运行时查找</strong> vtable 进行方法调用</td>
</tr>
<tr>
<td><strong>性能</strong></td>
<td><strong>无额外开销</strong>（可能会内联）</td>
<td><strong>有运行时开销</strong>（vtable 查找）</td>
</tr>
<tr>
<td><strong>代码大小</strong></td>
<td><strong>可能增大（因单态化）</strong></td>
<td><strong>代码更紧凑</strong>（共用 vtable）</td>
</tr>
<tr>
<td><strong>灵活性</strong></td>
<td><strong>适用于泛型</strong>，但每种类型都生成一个实现</td>
<td><strong>支持多态</strong>，可以存储不同类型</td>
</tr>
</tbody></table>
<p><strong>如果想使用动态分发，需要使用 <code>&amp;dyn Trait</code>，但会引入 vtable 查找的额外开销。</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">make_speak</span></span>(animal: &amp;<span class="keyword">dyn</span> Speak) &#123;</span><br><span class="line">    animal.speak();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们看看具体的LLVM IR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">; ModuleID = &#x27;main.74b210b97947ca2d-cgu.0&#x27;</span><br><span class="line">source_filename = &quot;main.74b210b97947ca2d-cgu.0&quot;</span><br><span class="line">target datalayout = &quot;e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128&quot;</span><br><span class="line">target triple = &quot;x86_64-apple-macosx10.12.0&quot;</span><br><span class="line"></span><br><span class="line">@vtable.0 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr, ptr, ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot; &#125;&gt;, align 8</span><br><span class="line">@0 = private unnamed_addr constant &lt;&#123; [8 x i8], [8 x i8] &#125;&gt; &lt;&#123; [8 x i8] zeroinitializer, [8 x i8] undef &#125;&gt;, align 8</span><br><span class="line">@alloc_d3d8effda880de431d7f9eb7fb819220 = private unnamed_addr constant &lt;&#123; [6 x i8] &#125;&gt; &lt;&#123; [6 x i8] c&quot;Woof!\0A&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_6a2f522e5acc171011a2c43a0f2bf5c0 = private unnamed_addr constant &lt;&#123; ptr, [8 x i8] &#125;&gt; &lt;&#123; ptr @alloc_d3d8effda880de431d7f9eb7fb819220, [8 x i8] c&quot;\06\00\00\00\00\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@vtable.1 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\00\01\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot; &#125;&gt;, align 8</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define hidden i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr %main, i64 %argc, ptr %argv, i8 %sigpipe) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_8 = alloca [8 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %main, ptr %_8, align 8</span><br><span class="line">; call std::rt::lang_start_internal</span><br><span class="line">  %0 = call i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1 %_8, ptr align 8 @vtable.0, i64 %argc, ptr %argv, i8 %sigpipe)</span><br><span class="line">  store i64 %0, ptr %_5, align 8</span><br><span class="line">  %v = load i64, ptr %_5, align 8</span><br><span class="line">  ret i64 %v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %self = alloca [1 x i8], align 1</span><br><span class="line">  %_4 = load ptr, ptr %_1, align 8</span><br><span class="line">; call std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">  call void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %_4)</span><br><span class="line">; call &lt;() as std::process::Termination&gt;::report</span><br><span class="line">  %0 = call i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;()</span><br><span class="line">  store i8 %0, ptr %self, align 1</span><br><span class="line">  %_6 = load i8, ptr %self, align 1</span><br><span class="line">  %_0 = zext i8 %_6 to i32</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">; Function Attrs: noinline uwtable</span><br><span class="line">define internal void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %f) unnamed_addr #2 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  call void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %f)</span><br><span class="line">  call void asm sideeffect &quot;&quot;, &quot;~&#123;memory&#125;&quot;(), !srcloc !3</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::fmt::Arguments::new_const</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_0, ptr align 8 %pieces) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  store ptr %pieces, ptr %_0, align 8</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i64 1, ptr %0, align 8</span><br><span class="line">  %1 = load ptr, ptr @0, align 8</span><br><span class="line">  %2 = load i64, ptr getelementptr inbounds (i8, ptr @0, i64 8), align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_0, i64 32</span><br><span class="line">  store ptr %1, ptr %3, align 8</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %3, i64 8</span><br><span class="line">  store i64 %2, ptr %4, align 8</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %_0, i64 16</span><br><span class="line">  store ptr inttoptr (i64 8 to ptr), ptr %5, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %5, i64 8</span><br><span class="line">  store i64 0, ptr %6, align 8</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once&#123;&#123;vtable.shim&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %0 = load ptr, ptr %_1, align 8</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  %_0 = call i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  call void %_1()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %_1 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %0, ptr %_1, align 8</span><br><span class="line">; invoke std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load ptr, ptr %1, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %4 = load i32, ptr %3, align 8</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; poison, ptr %2, 0</span><br><span class="line">  %6 = insertvalue &#123; ptr, i32 &#125; %5, i32 %4, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %7 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %7, 0</span><br><span class="line">  %9 = extractvalue &#123; ptr, i32 &#125; %7, 1</span><br><span class="line">  store ptr %8, ptr %1, align 8</span><br><span class="line">  %10 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %9, ptr %10, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;main::Dog&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr30drop_in_place$LT$main..Dog$GT$17h8d84d8b404b38369E&quot;(ptr align 1 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;std::rt::lang_start&lt;()&gt;::&#123;&#123;closure&#125;&#125;&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr85drop_in_place$LT$std..rt..lang_start$LT$$LP$$RP$$GT$..$u7b$$u7b$closure$u7d$$u7d$$GT$17hb322fcffbb433df1E&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;() as std::process::Termination&gt;::report</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i8 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = alloca [48 x i8], align 8</span><br><span class="line">; call core::fmt::Arguments::new_const</span><br><span class="line">  call void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_3, ptr align 8 @alloc_6a2f522e5acc171011a2c43a0f2bf5c0)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_3)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::make_speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main10make_speak17h3f0d4b296ec38cceE(ptr align 1 %animal.0, ptr align 8 %animal.1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %animal.1, i64 24</span><br><span class="line">  %1 = load ptr, ptr %0, align 8, !invariant.load !4, !nonnull !4</span><br><span class="line">  call void %1(ptr align 1 %animal.0)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_1 = alloca [0 x i8], align 1</span><br><span class="line">; call main::make_speak</span><br><span class="line">  call void @_ZN4main10make_speak17h3f0d4b296ec38cceE(ptr align 1 %_1, ptr align 8 @vtable.1)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start_internal</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1, ptr align 8, i64, ptr, i8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">declare i32 @rust_eh_personality(i32, i32, i64, ptr, ptr) unnamed_addr #3</span><br><span class="line"></span><br><span class="line">; std::io::stdio::_print</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">define i32 @main(i32 %0, ptr %1) unnamed_addr #4 &#123;</span><br><span class="line">top:</span><br><span class="line">  %2 = sext i32 %0 to i64</span><br><span class="line">; call std::rt::lang_start</span><br><span class="line">  %3 = call i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr @_ZN4main4main17h3df54791b8d52a26E, i64 %2, ptr %1, i8 0)</span><br><span class="line">  %4 = trunc i64 %3 to i32</span><br><span class="line">  ret i32 %4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attributes #0 = &#123; uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #1 = &#123; inlinehint uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #2 = &#123; noinline uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #3 = &#123; nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #4 = &#123; &quot;frame-pointer&quot;=&quot;all&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line"></span><br><span class="line">!llvm.module.flags = !&#123;!0, !1&#125;</span><br><span class="line">!llvm.ident = !&#123;!2&#125;</span><br><span class="line"></span><br><span class="line">!0 = !&#123;i32 8, !&quot;PIC Level&quot;, i32 2&#125;</span><br><span class="line">!1 = !&#123;i32 7, !&quot;PIE Level&quot;, i32 2&#125;</span><br><span class="line">!2 = !&#123;!&quot;rustc version 1.83.0 (90b35a623 2024-11-26)&quot;&#125;</span><br><span class="line">!3 = !&#123;i32 1884581&#125;</span><br><span class="line">!4 = !&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>核心在147~167</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#Dog的speak和静态分发没有多大的区别，是一样的</span><br><span class="line">; &lt;main::Dog as main::Speak&gt;::speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @&quot;_ZN41_$LT$main..Dog$u20$as$u20$main..Speak$GT$5speak17he863064ec8d71012E&quot;(ptr align 1 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = alloca [48 x i8], align 8</span><br><span class="line">; call core::fmt::Arguments::new_const</span><br><span class="line">  call void @_ZN4core3fmt9Arguments9new_const17h114a466e556912c6E(ptr sret([48 x i8]) align 8 %_3, ptr align 8 @alloc_6a2f522e5acc171011a2c43a0f2bf5c0)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_3)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#这里可以考到，main方法调用的就是animal的实现，而且是第0个实现</span><br><span class="line">; main::make_speak</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main10make_speak17h3f0d4b296ec38cceE(ptr align 1 %animal.0, ptr align 8 %animal.1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %animal.1, i64 24</span><br><span class="line">  %1 = load ptr, ptr %0, align 8, !invariant.load !4, !nonnull !4</span><br><span class="line">  call void %1(ptr align 1 %animal.0)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-迭代器（Iterator）优化"><a href="#3-迭代器（Iterator）优化" class="headerlink" title="3. 迭代器（Iterator）优化"></a>3. <strong>迭代器（Iterator）优化</strong></h2><p>Rust 的迭代器采用惰性计算，并通过<strong>内联展开</strong>优化。例如：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum: <span class="built_in">i32</span> = (<span class="number">1</span>..=<span class="number">100</span>).map(|x| x * <span class="number">2</span>).filter(|x| x % <span class="number">3</span> == <span class="number">0</span>).sum();</span><br></pre></td></tr></table></figure>

<p>在编译时，Rust 会优化链式调用，避免创建额外的中间集合，并直接生成高效的循环代码，类似于：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">100</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> x = i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> x % <span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">        sum += x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就避免了传统 OOP 语言中可能存在的<strong>额外迭代器对象</strong>或<strong>动态分发</strong>带来的性能损失。</p>
<p>**先说结论: **</p>
<p><strong>生成迭代器和闭包：</strong> 在编译过程中，<code>map</code> 和 <code>filter</code> 操作会创建迭代器和闭包的代码，但这些代码不会产生额外的函数调用，除非需要的话。实际上，这些迭代器是惰性地构建的，只有在遍历时才会执行操作。</p>
<p>迭代器生成的LLVM IR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br></pre></td><td class="code"><pre><span class="line">; ModuleID = &#x27;main.74b210b97947ca2d-cgu.0&#x27;</span><br><span class="line">source_filename = &quot;main.74b210b97947ca2d-cgu.0&quot;</span><br><span class="line">target datalayout = &quot;e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128&quot;</span><br><span class="line">target triple = &quot;x86_64-apple-macosx10.12.0&quot;</span><br><span class="line"></span><br><span class="line">%&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot; = type &#123; %&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; &#125;</span><br><span class="line">%&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; = type &#123; ptr, [1 x i64] &#125;</span><br><span class="line"></span><br><span class="line">@vtable.0 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr, ptr, ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot; &#125;&gt;, align 8</span><br><span class="line">@0 = private unnamed_addr constant &lt;&#123; [4 x i8], [4 x i8] &#125;&gt; &lt;&#123; [4 x i8] zeroinitializer, [4 x i8] undef &#125;&gt;, align 4</span><br><span class="line">@1 = private unnamed_addr constant &lt;&#123; [8 x i8], [8 x i8] &#125;&gt; &lt;&#123; [8 x i8] zeroinitializer, [8 x i8] undef &#125;&gt;, align 8</span><br><span class="line">@alloc_1eb6f53a157dccb32488e066ad957e6d = private unnamed_addr constant &lt;&#123; [82 x i8] &#125;&gt; &lt;&#123; [82 x i8] c&quot;unsafe precondition(s) violated: hint::unreachable_unchecked must never be reached&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_5e2e3273f6fefc632309f00bd1728ddd = private unnamed_addr constant &lt;&#123; [119 x i8] &#125;&gt; &lt;&#123; [119 x i8] c&quot;/Users/zhanhao/.rustup/toolchains/stable-x86_64-apple-darwin/lib/rustlib/src/rust/library/core/src/iter/traits/accum.rs&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_f3432b9f98e8ac35855e9b2a864b6c90 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_5e2e3273f6fefc632309f00bd1728ddd, [16 x i8] c&quot;w\00\00\00\00\00\00\00\95\00\00\00\01\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_a552183c9659ff166e9ae084c424b6d2 = private unnamed_addr constant &lt;&#123; [6 x i8] &#125;&gt; &lt;&#123; [6 x i8] c&quot;sum = &quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_49a1e817e911805af64bbc7efb390101 = private unnamed_addr constant &lt;&#123; [1 x i8] &#125;&gt; &lt;&#123; [1 x i8] c&quot;\0A&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_f87b91d646f532f744b8a218a32891e2 = private unnamed_addr constant &lt;&#123; ptr, [8 x i8], ptr, [8 x i8] &#125;&gt; &lt;&#123; ptr @alloc_a552183c9659ff166e9ae084c424b6d2, [8 x i8] c&quot;\06\00\00\00\00\00\00\00&quot;, ptr @alloc_49a1e817e911805af64bbc7efb390101, [8 x i8] c&quot;\01\00\00\00\00\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_1a75b0218f3e027a684428f41d4202ae = private unnamed_addr constant &lt;&#123; [13 x i8] &#125;&gt; &lt;&#123; [13 x i8] c&quot;./src/main.rs&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_42201ffa1590b3ef5ad73c0ee46fcb29 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\02\00\00\00&amp;\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_966f6a1d19f4abfbde2009ce2476ff20 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\02\00\00\008\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line"></span><br><span class="line">; &lt;core::iter::adapters::map::Map&lt;I,F&gt; as core::iter::traits::iterator::Iterator&gt;::fold</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal i32 @&quot;_ZN102_$LT$core..iter..adapters..map..Map$LT$I$C$F$GT$$u20$as$u20$core..iter..traits..iterator..Iterator$GT$4fold17h4d0b9d87318881ecE&quot;(ptr align 4 %self, i32 %init) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_4 = alloca [12 x i8], align 4</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_4, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">; call core::iter::range::&lt;impl core::iter::traits::iterator::Iterator for core::ops::range::RangeInclusive&lt;A&gt;&gt;::fold</span><br><span class="line">  %_0 = call i32 @&quot;_ZN4core4iter5range110_$LT$impl$u20$core..iter..traits..iterator..Iterator$u20$for$u20$core..ops..range..RangeInclusive$LT$A$GT$$GT$4fold17h2cda24f8eac5a683E&quot;(ptr align 4 %_4, i32 %init)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::FromResidual&gt;::from_residual</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN103_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..FromResidual$GT$13from_residual17h5beb4604d942858dE&quot;() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;core::ops::range::RangeInclusive&lt;T&gt; as core::iter::range::RangeInclusiveIteratorImpl&gt;::spec_try_fold</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN107_$LT$core..ops..range..RangeInclusive$LT$T$GT$$u20$as$u20$core..iter..range..RangeInclusiveIteratorImpl$GT$13spec_try_fold17he66690591e425eb8E&quot;(ptr align 4 %self, i32 %init) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [16 x i8], align 8</span><br><span class="line">  %_36 = alloca [1 x i8], align 1</span><br><span class="line">  %_35 = alloca [1 x i8], align 1</span><br><span class="line">  %_25 = alloca [4 x i8], align 4</span><br><span class="line">  %_14 = alloca [4 x i8], align 4</span><br><span class="line">  %accum = alloca [4 x i8], align 4</span><br><span class="line">  %_0 = alloca [4 x i8], align 4</span><br><span class="line">  %f = alloca [0 x i8], align 1</span><br><span class="line">  store i8 1, ptr %_36, align 1</span><br><span class="line">  %1 = getelementptr inbounds i8, ptr %self, i64 8</span><br><span class="line">  %2 = load i8, ptr %1, align 4</span><br><span class="line">  %_37 = trunc i8 %2 to i1</span><br><span class="line">  br i1 %_37, label %bb34, label %bb35</span><br><span class="line"></span><br><span class="line">bb35:                                             ; preds = %start</span><br><span class="line">  %_40 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %_3.i = load i32, ptr %self, align 4</span><br><span class="line">  %_4.i = load i32, ptr %_40, align 4</span><br><span class="line">  %_0.i = icmp sle i32 %_3.i, %_4.i</span><br><span class="line">  br label %bb36</span><br><span class="line"></span><br><span class="line">bb34:                                             ; preds = %start</span><br><span class="line">  br label %bb1</span><br><span class="line"></span><br><span class="line">bb28:                                             ; preds = %bb30, %bb31, %cleanup</span><br><span class="line">  br label %bb33</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %bb1</span><br><span class="line">  %3 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %4 = extractvalue &#123; ptr, i32 &#125; %3, 0</span><br><span class="line">  %5 = extractvalue &#123; ptr, i32 &#125; %3, 1</span><br><span class="line">  store ptr %4, ptr %0, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  store i32 %5, ptr %6, align 8</span><br><span class="line">  br label %bb28</span><br><span class="line"></span><br><span class="line">bb36:                                             ; preds = %bb35</span><br><span class="line">  %_4 = xor i1 %_0.i, true</span><br><span class="line">  br i1 %_4, label %bb1, label %bb3</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %bb36</span><br><span class="line">  store i8 0, ptr %_36, align 1</span><br><span class="line">  store i8 1, ptr %_35, align 1</span><br><span class="line">  store i32 %init, ptr %accum, align 4</span><br><span class="line">  br label %bb4</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %bb34, %bb36</span><br><span class="line">  store i8 0, ptr %_36, align 1</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::from_output</span><br><span class="line">  %7 = invoke i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$11from_output17hd1a5be93a64e257eE&quot;(i32 %init)</span><br><span class="line">          to label %bb2 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb4:                                              ; preds = %bb11, %bb3</span><br><span class="line">  %_9 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %_3.i4 = load i32, ptr %self, align 4</span><br><span class="line">  %_4.i5 = load i32, ptr %_9, align 4</span><br><span class="line">  %_0.i6 = icmp slt i32 %_3.i4, %_4.i5</span><br><span class="line">  br label %bb5</span><br><span class="line"></span><br><span class="line">bb31:                                             ; preds = %cleanup1</span><br><span class="line">  %8 = load i8, ptr %_35, align 1</span><br><span class="line">  %9 = trunc i8 %8 to i1</span><br><span class="line">  br i1 %9, label %bb30, label %bb28</span><br><span class="line"></span><br><span class="line">cleanup1:                                         ; preds = %bb12, %bb8, %bb7, %bb6, %bb20, %bb23, %bb17, %bb16, %bb14</span><br><span class="line">  %10 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %11 = extractvalue &#123; ptr, i32 &#125; %10, 0</span><br><span class="line">  %12 = extractvalue &#123; ptr, i32 &#125; %10, 1</span><br><span class="line">  store ptr %11, ptr %0, align 8</span><br><span class="line">  %13 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  store i32 %12, ptr %13, align 8</span><br><span class="line">  br label %bb31</span><br><span class="line"></span><br><span class="line">bb5:                                              ; preds = %bb4</span><br><span class="line">  br i1 %_0.i6, label %bb6, label %bb14</span><br><span class="line"></span><br><span class="line">bb14:                                             ; preds = %bb5</span><br><span class="line">  %14 = getelementptr inbounds i8, ptr %self, i64 8</span><br><span class="line">  store i8 1, ptr %14, align 4</span><br><span class="line">  %_24 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">; invoke core::cmp::impls::&lt;impl core::cmp::PartialEq for i32&gt;::eq</span><br><span class="line">  %_22 = invoke zeroext i1 @&quot;_ZN4core3cmp5impls54_$LT$impl$u20$core..cmp..PartialEq$u20$for$u20$i32$GT$2eq17h07b9330e5714acc5E&quot;(ptr align 4 %self, ptr align 4 %_24)</span><br><span class="line">          to label %bb15 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb6:                                              ; preds = %bb5</span><br><span class="line">  %_11 = load i32, ptr %self, align 4</span><br><span class="line">; invoke &lt;i32 as core::iter::range::Step&gt;::forward_unchecked</span><br><span class="line">  %n = invoke i32 @&quot;_ZN47_$LT$i32$u20$as$u20$core..iter..range..Step$GT$17forward_unchecked17h2d75c3d40c551b02E&quot;(i32 %_11, i64 1)</span><br><span class="line">          to label %bb7 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb15:                                             ; preds = %bb14</span><br><span class="line">  br i1 %_22, label %bb16, label %bb22</span><br><span class="line"></span><br><span class="line">bb22:                                             ; preds = %bb15</span><br><span class="line">  br label %bb23</span><br><span class="line"></span><br><span class="line">bb16:                                             ; preds = %bb15</span><br><span class="line">  store i8 0, ptr %_35, align 1</span><br><span class="line">  %_29 = load i32, ptr %accum, align 4</span><br><span class="line">  %_30 = load i32, ptr %self, align 4</span><br><span class="line">; invoke core::ops::try_trait::NeverShortCircuit&lt;T&gt;::wrap_mut_2::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_26 = invoke i32 @&quot;_ZN4core3ops9try_trait26NeverShortCircuit$LT$T$GT$10wrap_mut_228_$u7b$$u7b$closure$u7d$$u7d$17hab15f108563b4ae3E&quot;(ptr align 1 %f, i32 %_29, i32 %_30)</span><br><span class="line">          to label %bb17 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb23:                                             ; preds = %bb19, %bb22</span><br><span class="line">  store i8 0, ptr %_35, align 1</span><br><span class="line">  %_34 = load i32, ptr %accum, align 4</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::from_output</span><br><span class="line">  %15 = invoke i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$11from_output17hd1a5be93a64e257eE&quot;(i32 %_34)</span><br><span class="line">          to label %bb24 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb17:                                             ; preds = %bb16</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::branch</span><br><span class="line">  %16 = invoke i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$6branch17h3dd395b11e908455E&quot;(i32 %_26)</span><br><span class="line">          to label %bb18 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb18:                                             ; preds = %bb17</span><br><span class="line">  store i32 %16, ptr %_25, align 4</span><br><span class="line">  br label %bb19</span><br><span class="line"></span><br><span class="line">bb19:                                             ; preds = %bb18</span><br><span class="line">  %val = load i32, ptr %_25, align 4</span><br><span class="line">  store i32 %val, ptr %accum, align 4</span><br><span class="line">  br label %bb23</span><br><span class="line"></span><br><span class="line">bb24:                                             ; preds = %bb23</span><br><span class="line">  store i32 %15, ptr %_0, align 4</span><br><span class="line">  br label %bb27</span><br><span class="line"></span><br><span class="line">bb27:                                             ; preds = %bb26, %bb24</span><br><span class="line">  %17 = load i32, ptr %_0, align 4</span><br><span class="line">  ret i32 %17</span><br><span class="line"></span><br><span class="line">bb20:                                             ; No predecessors!</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::FromResidual&gt;::from_residual</span><br><span class="line">  %18 = invoke i32 @&quot;_ZN103_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..FromResidual$GT$13from_residual17h5beb4604d942858dE&quot;()</span><br><span class="line">          to label %bb21 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb21:                                             ; preds = %bb20</span><br><span class="line">  store i32 %18, ptr %_0, align 4</span><br><span class="line">  br label %bb25</span><br><span class="line"></span><br><span class="line">bb25:                                             ; preds = %bb13, %bb21</span><br><span class="line">  br label %bb26</span><br><span class="line"></span><br><span class="line">bb7:                                              ; preds = %bb6</span><br><span class="line">  %n2 = load i32, ptr %self, align 4</span><br><span class="line">  store i32 %n, ptr %self, align 4</span><br><span class="line">  store i8 0, ptr %_35, align 1</span><br><span class="line">  %_18 = load i32, ptr %accum, align 4</span><br><span class="line">; invoke core::ops::try_trait::NeverShortCircuit&lt;T&gt;::wrap_mut_2::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_15 = invoke i32 @&quot;_ZN4core3ops9try_trait26NeverShortCircuit$LT$T$GT$10wrap_mut_228_$u7b$$u7b$closure$u7d$$u7d$17hab15f108563b4ae3E&quot;(ptr align 1 %f, i32 %_18, i32 %n2)</span><br><span class="line">          to label %bb8 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb8:                                              ; preds = %bb7</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::branch</span><br><span class="line">  %19 = invoke i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$6branch17h3dd395b11e908455E&quot;(i32 %_15)</span><br><span class="line">          to label %bb9 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb9:                                              ; preds = %bb8</span><br><span class="line">  store i32 %19, ptr %_14, align 4</span><br><span class="line">  br label %bb11</span><br><span class="line"></span><br><span class="line">bb11:                                             ; preds = %bb9</span><br><span class="line">  %val3 = load i32, ptr %_14, align 4</span><br><span class="line">  store i8 1, ptr %_35, align 1</span><br><span class="line">  store i32 %val3, ptr %accum, align 4</span><br><span class="line">  br label %bb4</span><br><span class="line"></span><br><span class="line">bb12:                                             ; No predecessors!</span><br><span class="line">; invoke &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::FromResidual&gt;::from_residual</span><br><span class="line">  %20 = invoke i32 @&quot;_ZN103_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..FromResidual$GT$13from_residual17h5beb4604d942858dE&quot;()</span><br><span class="line">          to label %bb13 unwind label %cleanup1</span><br><span class="line"></span><br><span class="line">bb13:                                             ; preds = %bb12</span><br><span class="line">  store i32 %20, ptr %_0, align 4</span><br><span class="line">  br label %bb25</span><br><span class="line"></span><br><span class="line">bb26:                                             ; preds = %bb2, %bb25</span><br><span class="line">  br label %bb27</span><br><span class="line"></span><br><span class="line">bb10:                                             ; No predecessors!</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb30:                                             ; preds = %bb31</span><br><span class="line">  br label %bb28</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %bb1</span><br><span class="line">  store i32 %7, ptr %_0, align 4</span><br><span class="line">  br label %bb26</span><br><span class="line"></span><br><span class="line">bb33:                                             ; preds = %bb28</span><br><span class="line">  %21 = load i8, ptr %_36, align 1</span><br><span class="line">  %22 = trunc i8 %21 to i1</span><br><span class="line">  br i1 %22, label %bb32, label %bb29</span><br><span class="line"></span><br><span class="line">bb29:                                             ; preds = %bb32, %bb33</span><br><span class="line">  %23 = load ptr, ptr %0, align 8</span><br><span class="line">  %24 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  %25 = load i32, ptr %24, align 8</span><br><span class="line">  %26 = insertvalue &#123; ptr, i32 &#125; poison, ptr %23, 0</span><br><span class="line">  %27 = insertvalue &#123; ptr, i32 &#125; %26, i32 %25, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %27</span><br><span class="line"></span><br><span class="line">bb32:                                             ; preds = %bb33</span><br><span class="line">  br label %bb29</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;core::iter::adapters::filter::Filter&lt;I,P&gt; as core::iter::traits::iterator::Iterator&gt;::fold</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN108_$LT$core..iter..adapters..filter..Filter$LT$I$C$P$GT$$u20$as$u20$core..iter..traits..iterator..Iterator$GT$4fold17h01a3ba5581b44147E&quot;(ptr align 4 %self, i32 %init) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_4 = alloca [12 x i8], align 4</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_4, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">; call &lt;core::iter::adapters::map::Map&lt;I,F&gt; as core::iter::traits::iterator::Iterator&gt;::fold</span><br><span class="line">  %_0 = call i32 @&quot;_ZN102_$LT$core..iter..adapters..map..Map$LT$I$C$F$GT$$u20$as$u20$core..iter..traits..iterator..Iterator$GT$4fold17h4d0b9d87318881ecE&quot;(ptr align 4 %_4, i32 %init)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define hidden i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr %main, i64 %argc, ptr %argv, i8 %sigpipe) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_8 = alloca [8 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %main, ptr %_8, align 8</span><br><span class="line">; call std::rt::lang_start_internal</span><br><span class="line">  %0 = call i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1 %_8, ptr align 8 @vtable.0, i64 %argc, ptr %argv, i8 %sigpipe)</span><br><span class="line">  store i64 %0, ptr %_5, align 8</span><br><span class="line">  %v = load i64, ptr %_5, align 8</span><br><span class="line">  ret i64 %v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %self = alloca [1 x i8], align 1</span><br><span class="line">  %_4 = load ptr, ptr %_1, align 8</span><br><span class="line">; call std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">  call void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %_4)</span><br><span class="line">; call &lt;() as std::process::Termination&gt;::report</span><br><span class="line">  %0 = call i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;()</span><br><span class="line">  store i8 %0, ptr %self, align 1</span><br><span class="line">  %_6 = load i8, ptr %self, align 1</span><br><span class="line">  %_0 = zext i8 %_6 to i32</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">; Function Attrs: noinline uwtable</span><br><span class="line">define internal void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %f) unnamed_addr #2 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  call void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %f)</span><br><span class="line">  call void asm sideeffect &quot;&quot;, &quot;~&#123;memory&#125;&quot;(), !srcloc !3</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::ops::arith::Rem&gt;::rem</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN45_$LT$i32$u20$as$u20$core..ops..arith..Rem$GT$3rem17ha953cb9a384e58f2E&quot;(i32 %self, i32 %other, ptr align 8 %0) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = icmp eq i32 %other, 0</span><br><span class="line">  br i1 %_3, label %panic, label %bb1</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  %_4 = icmp eq i32 %other, -1</span><br><span class="line">  %_5 = icmp eq i32 %self, -2147483648</span><br><span class="line">  %_6 = and i1 %_4, %_5</span><br><span class="line">  br i1 %_6, label %panic1, label %bb2</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %start</span><br><span class="line">; call core::panicking::panic_const::panic_const_rem_by_zero</span><br><span class="line">  call void @_ZN4core9panicking11panic_const23panic_const_rem_by_zero17h9a2f0eb04bd653a2E(ptr align 8 %0) #10</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %bb1</span><br><span class="line">  %_0 = srem i32 %self, %other</span><br><span class="line">  ret i32 %_0</span><br><span class="line"></span><br><span class="line">panic1:                                           ; preds = %bb1</span><br><span class="line">; call core::panicking::panic_const::panic_const_rem_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_rem_overflow17hf0a90bc09c9acb58E(ptr align 8 %0) #10</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::iter::range::Step&gt;::forward_unchecked</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN47_$LT$i32$u20$as$u20$core..iter..range..Step$GT$17forward_unchecked17h2d75c3d40c551b02E&quot;(i32 %start1, i64 %n) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [1 x i8], align 1</span><br><span class="line">  %self = alloca [8 x i8], align 4</span><br><span class="line">  %rhs = trunc i64 %n to i32</span><br><span class="line">  %1 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %start1, i32 %rhs)</span><br><span class="line">  %_11.0 = extractvalue &#123; i32, i1 &#125; %1, 0</span><br><span class="line">  %_11.1 = extractvalue &#123; i32, i1 &#125; %1, 1</span><br><span class="line">  %_8 = icmp slt i32 %rhs, 0</span><br><span class="line">  %b = xor i1 %_11.1, %_8</span><br><span class="line">  %2 = zext i1 %b to i8</span><br><span class="line">  store i8 %2, ptr %0, align 1</span><br><span class="line">  %3 = load i8, ptr %0, align 1</span><br><span class="line">  %_5 = trunc i8 %3 to i1</span><br><span class="line">  br i1 %_5, label %bb2, label %bb3</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %start</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  store i32 %_11.0, ptr %4, align 4</span><br><span class="line">  store i32 1, ptr %self, align 4</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %val = load i32, ptr %5, align 4</span><br><span class="line">  ret i32 %val</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %start</span><br><span class="line">  %6 = load i32, ptr @0, align 4</span><br><span class="line">  %7 = load i32, ptr getelementptr inbounds (i8, ptr @0, i64 4), align 4</span><br><span class="line">  store i32 %6, ptr %self, align 4</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  store i32 %7, ptr %8, align 4</span><br><span class="line">; call core::hint::unreachable_unchecked::precondition_check</span><br><span class="line">  call void @_ZN4core4hint21unreachable_unchecked18precondition_check17h159a5fa27563914cE() #11</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::intrinsics::unlikely</span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">define internal zeroext i1 @_ZN4core10intrinsics8unlikely17had3dabe335c627beE(i1 zeroext %b) unnamed_addr #3 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i1 %b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::cmp::impls::&lt;impl core::cmp::PartialEq for i32&gt;::eq</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal zeroext i1 @&quot;_ZN4core3cmp5impls54_$LT$impl$u20$core..cmp..PartialEq$u20$for$u20$i32$GT$2eq17h07b9330e5714acc5E&quot;(ptr align 4 %self, ptr align 4 %other) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = load i32, ptr %self, align 4</span><br><span class="line">  %_4 = load i32, ptr %other, align 4</span><br><span class="line">  %_0 = icmp eq i32 %_3, %_4</span><br><span class="line">  ret i1 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::fmt::Arguments::new_v1</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_0, ptr align 8 %pieces, ptr align 8 %args) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  store ptr %pieces, ptr %_0, align 8</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i64 2, ptr %0, align 8</span><br><span class="line">  %1 = load ptr, ptr @1, align 8</span><br><span class="line">  %2 = load i64, ptr getelementptr inbounds (i8, ptr @1, i64 8), align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_0, i64 32</span><br><span class="line">  store ptr %1, ptr %3, align 8</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %3, i64 8</span><br><span class="line">  store i64 %2, ptr %4, align 8</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %_0, i64 16</span><br><span class="line">  store ptr %args, ptr %5, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %5, i64 8</span><br><span class="line">  store i64 1, ptr %6, align 8</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_0, i32 %start1, i32 %end) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  store i32 %start1, ptr %_0, align 4</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 4</span><br><span class="line">  store i32 %end, ptr %0, align 4</span><br><span class="line">  %1 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i8 0, ptr %1, align 4</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once&#123;&#123;vtable.shim&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %0 = load ptr, ptr %_1, align 8</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  %_0 = call i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  call void %_1()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %_1 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %0, ptr %_1, align 8</span><br><span class="line">; invoke std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load ptr, ptr %1, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %4 = load i32, ptr %3, align 8</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; poison, ptr %2, 0</span><br><span class="line">  %6 = insertvalue &#123; ptr, i32 &#125; %5, i32 %4, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %7 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %7, 0</span><br><span class="line">  %9 = extractvalue &#123; ptr, i32 &#125; %7, 1</span><br><span class="line">  store ptr %8, ptr %1, align 8</span><br><span class="line">  %10 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %9, ptr %10, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::try_trait::NeverShortCircuit&lt;T&gt;::wrap_mut_2::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops9try_trait26NeverShortCircuit$LT$T$GT$10wrap_mut_228_$u7b$$u7b$closure$u7d$$u7d$17hab15f108563b4ae3E&quot;(ptr align 1 %_1, i32 %a, i32 %b) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::iter::adapters::map::map_fold::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_4 = call i32 @&quot;_ZN4core4iter8adapters3map8map_fold28_$u7b$$u7b$closure$u7d$$u7d$17h856a5962dc1069d8E&quot;(ptr align 1 %_1, i32 %a, i32 %b)</span><br><span class="line">  ret i32 %_4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;std::rt::lang_start&lt;()&gt;::&#123;&#123;closure&#125;&#125;&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr85drop_in_place$LT$std..rt..lang_start$LT$$LP$$RP$$GT$..$u7b$$u7b$closure$u7d$$u7d$$GT$17hb322fcffbb433df1E&quot;(ptr align 8 %_1) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::hint::unreachable_unchecked::precondition_check</span><br><span class="line">; Function Attrs: inlinehint nounwind uwtable</span><br><span class="line">define internal void @_ZN4core4hint21unreachable_unchecked18precondition_check17h159a5fa27563914cE() unnamed_addr #4 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::panicking::panic_nounwind</span><br><span class="line">  call void @_ZN4core9panicking14panic_nounwind17h0343eb3636eafe8aE(ptr align 1 @alloc_1eb6f53a157dccb32488e066ad957e6d, i64 82) #12</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::range::&lt;impl core::iter::traits::iterator::Iterator for core::ops::range::RangeInclusive&lt;A&gt;&gt;::fold</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core4iter5range110_$LT$impl$u20$core..iter..traits..iterator..Iterator$u20$for$u20$core..ops..range..RangeInclusive$LT$A$GT$$GT$4fold17h2cda24f8eac5a683E&quot;(ptr align 4 %self, i32 %init) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [16 x i8], align 8</span><br><span class="line">; invoke &lt;core::ops::range::RangeInclusive&lt;T&gt; as core::iter::range::RangeInclusiveIteratorImpl&gt;::spec_try_fold</span><br><span class="line">  %_4 = invoke i32 @&quot;_ZN107_$LT$core..ops..range..RangeInclusive$LT$T$GT$$u20$as$u20$core..iter..range..RangeInclusiveIteratorImpl$GT$13spec_try_fold17he66690591e425eb8E&quot;(ptr align 4 %self, i32 %init)</span><br><span class="line">          to label %bb4 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %cleanup</span><br><span class="line">  %1 = load ptr, ptr %0, align 8</span><br><span class="line">  %2 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  %3 = load i32, ptr %2, align 8</span><br><span class="line">  %4 = insertvalue &#123; ptr, i32 &#125; poison, ptr %1, 0</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; %4, i32 %3, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %5</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %6 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %7 = extractvalue &#123; ptr, i32 &#125; %6, 0</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %6, 1</span><br><span class="line">  store ptr %7, ptr %0, align 8</span><br><span class="line">  %9 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  store i32 %8, ptr %9, align 8</span><br><span class="line">  br label %bb2</span><br><span class="line"></span><br><span class="line">bb4:                                              ; preds = %start</span><br><span class="line">  ret i32 %_4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::traits::iterator::Iterator::map</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core4iter6traits8iterator8Iterator3map17h4f494a9715262644E(ptr sret([12 x i8]) align 4 %_0, ptr align 4 %self) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_0, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::traits::iterator::Iterator::sum</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal i32 @_ZN4core4iter6traits8iterator8Iterator3sum17h211e50dc6e776300E(ptr align 4 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;i32 as core::iter::traits::accum::Sum&gt;::sum</span><br><span class="line">  %_0 = call i32 @&quot;_ZN54_$LT$i32$u20$as$u20$core..iter..traits..accum..Sum$GT$3sum17h671e27ec028208f0E&quot;(ptr align 4 %self)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::traits::iterator::Iterator::filter</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core4iter6traits8iterator8Iterator6filter17h660a029a663eeaa4E(ptr sret([12 x i8]) align 4 %_0, ptr align 4 %self) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_0, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::adapters::map::map_fold::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core4iter8adapters3map8map_fold28_$u7b$$u7b$closure$u7d$$u7d$17h856a5962dc1069d8E&quot;(ptr align 1 %_1, i32 %acc, i32 %elt) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [16 x i8], align 8</span><br><span class="line">  %_10 = alloca [1 x i8], align 1</span><br><span class="line">  store i8 1, ptr %_10, align 1</span><br><span class="line">; invoke main::main::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_7 = invoke i32 @&quot;_ZN4main4main28_$u7b$$u7b$closure$u7d$$u7d$17h1d13cc624b5c335bE&quot;(ptr align 1 %_1, i32 %elt)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb5:                                              ; preds = %cleanup</span><br><span class="line">  %1 = load i8, ptr %_10, align 1</span><br><span class="line">  %2 = trunc i8 %1 to i1</span><br><span class="line">  br i1 %2, label %bb4, label %bb3</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %bb1, %start</span><br><span class="line">  %3 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %4 = extractvalue &#123; ptr, i32 &#125; %3, 0</span><br><span class="line">  %5 = extractvalue &#123; ptr, i32 &#125; %3, 1</span><br><span class="line">  store ptr %4, ptr %0, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  store i32 %5, ptr %6, align 8</span><br><span class="line">  br label %bb5</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  store i8 0, ptr %_10, align 1</span><br><span class="line">; invoke core::iter::adapters::filter::filter_fold::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN4core4iter8adapters6filter11filter_fold28_$u7b$$u7b$closure$u7d$$u7d$17hb54f7ec8172c9b25E&quot;(ptr align 1 %_1, i32 %acc, i32 %_7)</span><br><span class="line">          to label %bb2 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %bb1</span><br><span class="line">  ret i32 %_0</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %bb4, %bb5</span><br><span class="line">  %7 = load ptr, ptr %0, align 8</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %0, i64 8</span><br><span class="line">  %9 = load i32, ptr %8, align 8</span><br><span class="line">  %10 = insertvalue &#123; ptr, i32 &#125; poison, ptr %7, 0</span><br><span class="line">  %11 = insertvalue &#123; ptr, i32 &#125; %10, i32 %9, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %11</span><br><span class="line"></span><br><span class="line">bb4:                                              ; preds = %bb5</span><br><span class="line">  br label %bb3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::adapters::filter::filter_fold::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core4iter8adapters6filter11filter_fold28_$u7b$$u7b$closure$u7d$$u7d$17hb54f7ec8172c9b25E&quot;(ptr align 1 %_1, i32 %acc, i32 %0) unnamed_addr #1 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_13 = alloca [1 x i8], align 1</span><br><span class="line">  %_12 = alloca [1 x i8], align 1</span><br><span class="line">  %_0 = alloca [4 x i8], align 4</span><br><span class="line">  %item = alloca [4 x i8], align 4</span><br><span class="line">  store i32 %0, ptr %item, align 4</span><br><span class="line">  store i8 1, ptr %_13, align 1</span><br><span class="line">  store i8 1, ptr %_12, align 1</span><br><span class="line">; invoke main::main::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_4 = invoke zeroext i1 @&quot;_ZN4main4main28_$u7b$$u7b$closure$u7d$$u7d$17h911699242380ab58E&quot;(ptr align 1 %_1, ptr align 4 %item)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb9:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load i8, ptr %_12, align 1</span><br><span class="line">  %3 = trunc i8 %2 to i1</span><br><span class="line">  br i1 %3, label %bb8, label %bb6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %bb2, %start</span><br><span class="line">  %4 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %5 = extractvalue &#123; ptr, i32 &#125; %4, 0</span><br><span class="line">  %6 = extractvalue &#123; ptr, i32 &#125; %4, 1</span><br><span class="line">  store ptr %5, ptr %1, align 8</span><br><span class="line">  %7 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %6, ptr %7, align 8</span><br><span class="line">  br label %bb9</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  br i1 %_4, label %bb2, label %bb4</span><br><span class="line"></span><br><span class="line">bb4:                                              ; preds = %bb1</span><br><span class="line">  store i8 0, ptr %_13, align 1</span><br><span class="line">  store i32 %acc, ptr %_0, align 4</span><br><span class="line">  br label %bb5</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %bb1</span><br><span class="line">  store i8 0, ptr %_13, align 1</span><br><span class="line">  store i8 0, ptr %_12, align 1</span><br><span class="line">  %_11 = load i32, ptr %item, align 4</span><br><span class="line">; invoke &lt;i32 as core::iter::traits::accum::Sum&gt;::sum::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %8 = invoke i32 @&quot;_ZN54_$LT$i32$u20$as$u20$core..iter..traits..accum..Sum$GT$3sum28_$u7b$$u7b$closure$u7d$$u7d$17hfbfd4f344637882cE&quot;(ptr align 1 %_1, i32 %acc, i32 %_11)</span><br><span class="line">          to label %bb3 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb5:                                              ; preds = %bb3, %bb4</span><br><span class="line">  %9 = load i32, ptr %_0, align 4</span><br><span class="line">  ret i32 %9</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %bb2</span><br><span class="line">  store i32 %8, ptr %_0, align 4</span><br><span class="line">  br label %bb5</span><br><span class="line"></span><br><span class="line">bb6:                                              ; preds = %bb8, %bb9</span><br><span class="line">  %10 = load i8, ptr %_13, align 1</span><br><span class="line">  %11 = trunc i8 %10 to i1</span><br><span class="line">  br i1 %11, label %bb10, label %bb7</span><br><span class="line"></span><br><span class="line">bb8:                                              ; preds = %bb9</span><br><span class="line">  br label %bb6</span><br><span class="line"></span><br><span class="line">bb7:                                              ; preds = %bb10, %bb6</span><br><span class="line">  %12 = load ptr, ptr %1, align 8</span><br><span class="line">  %13 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %14 = load i32, ptr %13, align 8</span><br><span class="line">  %15 = insertvalue &#123; ptr, i32 &#125; poison, ptr %12, 0</span><br><span class="line">  %16 = insertvalue &#123; ptr, i32 &#125; %15, i32 %14, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %16</span><br><span class="line"></span><br><span class="line">bb10:                                             ; preds = %bb6</span><br><span class="line">  br label %bb7</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;() as std::process::Termination&gt;::report</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i8 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::iter::traits::accum::Sum&gt;::sum</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal i32 @&quot;_ZN54_$LT$i32$u20$as$u20$core..iter..traits..accum..Sum$GT$3sum17h671e27ec028208f0E&quot;(ptr align 4 %iter) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;core::iter::adapters::filter::Filter&lt;I,P&gt; as core::iter::traits::iterator::Iterator&gt;::fold</span><br><span class="line">  %_0 = call i32 @&quot;_ZN108_$LT$core..iter..adapters..filter..Filter$LT$I$C$P$GT$$u20$as$u20$core..iter..traits..iterator..Iterator$GT$4fold17h01a3ba5581b44147E&quot;(ptr align 4 %iter, i32 0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::iter::traits::accum::Sum&gt;::sum::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN54_$LT$i32$u20$as$u20$core..iter..traits..accum..Sum$GT$3sum28_$u7b$$u7b$closure$u7d$$u7d$17hfbfd4f344637882cE&quot;(ptr align 1 %_1, i32 %a, i32 %b) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %a, i32 %b)</span><br><span class="line">  %_4.0 = extractvalue &#123; i32, i1 &#125; %0, 0</span><br><span class="line">  %_4.1 = extractvalue &#123; i32, i1 &#125; %0, 1</span><br><span class="line">  br i1 %_4.1, label %panic, label %bb1</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_4.0</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %start</span><br><span class="line">; call core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8 @alloc_f3432b9f98e8ac35855e9b2a864b6c90) #10</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;&amp;i32 as core::ops::arith::Rem&lt;i32&gt;&gt;::rem</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN60_$LT$$RF$i32$u20$as$u20$core..ops..arith..Rem$LT$i32$GT$$GT$3rem17had77fdb8ea043955E&quot;(ptr align 4 %self, i32 %other, ptr align 8 %0) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3 = load i32, ptr %self, align 4</span><br><span class="line">; call &lt;i32 as core::ops::arith::Rem&gt;::rem</span><br><span class="line">  %_0 = call i32 @&quot;_ZN45_$LT$i32$u20$as$u20$core..ops..arith..Rem$GT$3rem17ha953cb9a384e58f2E&quot;(i32 %_3, i32 %other, ptr align 8 %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::from_output</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$11from_output17hd1a5be93a64e257eE&quot;(i32 %x) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i32 %x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;core::ops::try_trait::NeverShortCircuit&lt;T&gt; as core::ops::try_trait::Try&gt;::branch</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN94_$LT$core..ops..try_trait..NeverShortCircuit$LT$T$GT$$u20$as$u20$core..ops..try_trait..Try$GT$6branch17h3dd395b11e908455E&quot;(i32 %self) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_0 = alloca [4 x i8], align 4</span><br><span class="line">  store i32 %self, ptr %_0, align 4</span><br><span class="line">  %0 = load i32, ptr %_0, align 4</span><br><span class="line">  ret i32 %0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3.i = alloca [16 x i8], align 8</span><br><span class="line">  %_10 = alloca [16 x i8], align 8</span><br><span class="line">  %_9 = alloca [16 x i8], align 8</span><br><span class="line">  %_6 = alloca [48 x i8], align 8</span><br><span class="line">  %_4 = alloca [12 x i8], align 4</span><br><span class="line">  %_3 = alloca [12 x i8], align 4</span><br><span class="line">  %_2 = alloca [12 x i8], align 4</span><br><span class="line">  %sum = alloca [4 x i8], align 4</span><br><span class="line">; call core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">  call void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_4, i32 1, i32 100)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::map</span><br><span class="line">  call void @_ZN4core4iter6traits8iterator8Iterator3map17h4f494a9715262644E(ptr sret([12 x i8]) align 4 %_3, ptr align 4 %_4)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::filter</span><br><span class="line">  call void @_ZN4core4iter6traits8iterator8Iterator6filter17h660a029a663eeaa4E(ptr sret([12 x i8]) align 4 %_2, ptr align 4 %_3)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::sum</span><br><span class="line">  %0 = call i32 @_ZN4core4iter6traits8iterator8Iterator3sum17h211e50dc6e776300E(ptr align 4 %_2)</span><br><span class="line">  store i32 %0, ptr %sum, align 4</span><br><span class="line">  store ptr %sum, ptr %_3.i, align 8</span><br><span class="line">  %1 = getelementptr inbounds i8, ptr %_3.i, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;, ptr %1, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_10, ptr align 8 %_3.i, i64 16, i1 false)</span><br><span class="line">  %2 = getelementptr inbounds [1 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_9, i64 0, i64 0</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %2, ptr align 8 %_10, i64 16, i1 false)</span><br><span class="line">; call core::fmt::Arguments::new_v1</span><br><span class="line">  call void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_6, ptr align 8 @alloc_f87b91d646f532f744b8a218a32891e2, ptr align 8 %_9)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_6)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4main4main28_$u7b$$u7b$closure$u7d$$u7d$17h1d13cc624b5c335bE&quot;(ptr align 1 %_1, i32 %x) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = call &#123; i32, i1 &#125; @llvm.smul.with.overflow.i32(i32 %x, i32 2)</span><br><span class="line">  %_3.0 = extractvalue &#123; i32, i1 &#125; %0, 0</span><br><span class="line">  %_3.1 = extractvalue &#123; i32, i1 &#125; %0, 1</span><br><span class="line">  br i1 %_3.1, label %panic, label %bb1</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_3.0</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %start</span><br><span class="line">; call core::panicking::panic_const::panic_const_mul_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_mul_overflow17h774f5648c036f383E(ptr align 8 @alloc_42201ffa1590b3ef5ad73c0ee46fcb29) #10</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal zeroext i1 @&quot;_ZN4main4main28_$u7b$$u7b$closure$u7d$$u7d$17h911699242380ab58E&quot;(ptr align 1 %_1, ptr align 4 %x) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;&amp;i32 as core::ops::arith::Rem&lt;i32&gt;&gt;::rem</span><br><span class="line">  %_3 = call i32 @&quot;_ZN60_$LT$$RF$i32$u20$as$u20$core..ops..arith..Rem$LT$i32$GT$$GT$3rem17had77fdb8ea043955E&quot;(ptr align 4 %x, i32 3, ptr align 8 @alloc_966f6a1d19f4abfbde2009ce2476ff20)</span><br><span class="line">  %_0 = icmp eq i32 %_3, 0</span><br><span class="line">  ret i1 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)</span><br><span class="line">declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #5</span><br><span class="line"></span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">declare i32 @rust_eh_personality(i32, i32, i64, ptr, ptr) unnamed_addr #3</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start_internal</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1, ptr align 8, i64, ptr, i8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_rem_by_zero</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const23panic_const_rem_by_zero17h9a2f0eb04bd653a2E(ptr align 8) unnamed_addr #6</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_rem_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_rem_overflow17hf0a90bc09c9acb58E(ptr align 8) unnamed_addr #6</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nosync nounwind speculatable willreturn memory(none)</span><br><span class="line">declare &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32, i32) #7</span><br><span class="line"></span><br><span class="line">; core::fmt::num::imp::&lt;impl core::fmt::Display for i32&gt;::fmt</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare zeroext i1 @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;(ptr align 4, ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_nounwind</span><br><span class="line">; Function Attrs: cold noinline noreturn nounwind uwtable</span><br><span class="line">declare void @_ZN4core9panicking14panic_nounwind17h0343eb3636eafe8aE(ptr align 1, i64) unnamed_addr #8</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8) unnamed_addr #6</span><br><span class="line"></span><br><span class="line">; std::io::stdio::_print</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8) unnamed_addr #0</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nosync nounwind speculatable willreturn memory(none)</span><br><span class="line">declare &#123; i32, i1 &#125; @llvm.smul.with.overflow.i32(i32, i32) #7</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_mul_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_mul_overflow17h774f5648c036f383E(ptr align 8) unnamed_addr #6</span><br><span class="line"></span><br><span class="line">define i32 @main(i32 %0, ptr %1) unnamed_addr #9 &#123;</span><br><span class="line">top:</span><br><span class="line">  %2 = sext i32 %0 to i64</span><br><span class="line">; call std::rt::lang_start</span><br><span class="line">  %3 = call i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr @_ZN4main4main17h3df54791b8d52a26E, i64 %2, ptr %1, i8 0)</span><br><span class="line">  %4 = trunc i64 %3 to i32</span><br><span class="line">  ret i32 %4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attributes #0 = &#123; uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #1 = &#123; inlinehint uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #2 = &#123; noinline uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #3 = &#123; nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #4 = &#123; inlinehint nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #5 = &#123; nocallback nofree nounwind willreturn memory(argmem: readwrite) &#125;</span><br><span class="line">attributes #6 = &#123; cold noinline noreturn uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #7 = &#123; nocallback nofree nosync nounwind speculatable willreturn memory(none) &#125;</span><br><span class="line">attributes #8 = &#123; cold noinline noreturn nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #9 = &#123; &quot;frame-pointer&quot;=&quot;all&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #10 = &#123; noreturn &#125;</span><br><span class="line">attributes #11 = &#123; nounwind &#125;</span><br><span class="line">attributes #12 = &#123; noreturn nounwind &#125;</span><br><span class="line"></span><br><span class="line">!llvm.module.flags = !&#123;!0, !1&#125;</span><br><span class="line">!llvm.ident = !&#123;!2&#125;</span><br><span class="line"></span><br><span class="line">!0 = !&#123;i32 8, !&quot;PIC Level&quot;, i32 2&#125;</span><br><span class="line">!1 = !&#123;i32 7, !&quot;PIE Level&quot;, i32 2&#125;</span><br><span class="line">!2 = !&#123;!&quot;rustc version 1.83.0 (90b35a623 2024-11-26)&quot;&#125;</span><br><span class="line">!3 = !&#123;i32 2250854&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>核心在737~769</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3.i = alloca [16 x i8], align 8</span><br><span class="line">  %_10 = alloca [16 x i8], align 8</span><br><span class="line">  %_9 = alloca [16 x i8], align 8</span><br><span class="line">  %_6 = alloca [48 x i8], align 8</span><br><span class="line">  %_4 = alloca [12 x i8], align 4</span><br><span class="line">  %_3 = alloca [12 x i8], align 4</span><br><span class="line">  %_2 = alloca [12 x i8], align 4</span><br><span class="line">  %sum = alloca [4 x i8], align 4</span><br><span class="line">; call core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">  call void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_4, i32 1, i32 100)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::map</span><br><span class="line">  call void @_ZN4core4iter6traits8iterator8Iterator3map17h4f494a9715262644E(ptr sret([12 x i8]) align 4 %_3, ptr align 4 %_4)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::filter</span><br><span class="line">  call void @_ZN4core4iter6traits8iterator8Iterator6filter17h660a029a663eeaa4E(ptr sret([12 x i8]) align 4 %_2, ptr align 4 %_3)</span><br><span class="line">; call core::iter::traits::iterator::Iterator::sum</span><br><span class="line">  %0 = call i32 @_ZN4core4iter6traits8iterator8Iterator3sum17h211e50dc6e776300E(ptr align 4 %_2)</span><br><span class="line">  store i32 %0, ptr %sum, align 4</span><br><span class="line">  store ptr %sum, ptr %_3.i, align 8</span><br><span class="line">  %1 = getelementptr inbounds i8, ptr %_3.i, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;, ptr %1, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_10, ptr align 8 %_3.i, i64 16, i1 false)</span><br><span class="line">  %2 = getelementptr inbounds [1 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_9, i64 0, i64 0</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %2, ptr align 8 %_10, i64 16, i1 false)</span><br><span class="line">; call core::fmt::Arguments::new_v1</span><br><span class="line">  call void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_6, ptr align 8 @alloc_f87b91d646f532f744b8a218a32891e2, ptr align 8 %_9)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_6)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>map和filter，都在align 4 迭代器（<code>%_4</code>），最终结果sum，存储也是使用的这个迭代器。</p>
<p>而闭包|x| x * 2，也直接展开为函数调用，_ZN4core4iter6traits8iterator8Iterator3map17h4f494a9715262644E</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">; core::iter::traits::iterator::Iterator::map</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core4iter6traits8iterator8Iterator3map17h4f494a9715262644E(ptr sret([12 x i8]) align 4 %_0, ptr align 4 %self) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_0, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>传统手写的循环的LLVM IR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br></pre></td><td class="code"><pre><span class="line">; ModuleID = &#x27;main.74b210b97947ca2d-cgu.0&#x27;</span><br><span class="line">source_filename = &quot;main.74b210b97947ca2d-cgu.0&quot;</span><br><span class="line">target datalayout = &quot;e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128&quot;</span><br><span class="line">target triple = &quot;x86_64-apple-macosx10.12.0&quot;</span><br><span class="line"></span><br><span class="line">%&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot; = type &#123; %&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; &#125;</span><br><span class="line">%&quot;core::fmt::rt::ArgumentType&lt;&#x27;_&gt;&quot; = type &#123; ptr, [1 x i64] &#125;</span><br><span class="line"></span><br><span class="line">@vtable.0 = private unnamed_addr constant &lt;&#123; [24 x i8], ptr, ptr, ptr &#125;&gt; &lt;&#123; [24 x i8] c&quot;\00\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00\08\00\00\00\00\00\00\00&quot;, ptr @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;, ptr @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot; &#125;&gt;, align 8</span><br><span class="line">@0 = private unnamed_addr constant &lt;&#123; [4 x i8], [4 x i8] &#125;&gt; &lt;&#123; [4 x i8] zeroinitializer, [4 x i8] undef &#125;&gt;, align 4</span><br><span class="line">@1 = private unnamed_addr constant &lt;&#123; [8 x i8], [8 x i8] &#125;&gt; &lt;&#123; [8 x i8] zeroinitializer, [8 x i8] undef &#125;&gt;, align 8</span><br><span class="line">@alloc_1eb6f53a157dccb32488e066ad957e6d = private unnamed_addr constant &lt;&#123; [82 x i8] &#125;&gt; &lt;&#123; [82 x i8] c&quot;unsafe precondition(s) violated: hint::unreachable_unchecked must never be reached&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_a552183c9659ff166e9ae084c424b6d2 = private unnamed_addr constant &lt;&#123; [6 x i8] &#125;&gt; &lt;&#123; [6 x i8] c&quot;sum = &quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_49a1e817e911805af64bbc7efb390101 = private unnamed_addr constant &lt;&#123; [1 x i8] &#125;&gt; &lt;&#123; [1 x i8] c&quot;\0A&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_f87b91d646f532f744b8a218a32891e2 = private unnamed_addr constant &lt;&#123; ptr, [8 x i8], ptr, [8 x i8] &#125;&gt; &lt;&#123; ptr @alloc_a552183c9659ff166e9ae084c424b6d2, [8 x i8] c&quot;\06\00\00\00\00\00\00\00&quot;, ptr @alloc_49a1e817e911805af64bbc7efb390101, [8 x i8] c&quot;\01\00\00\00\00\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_1a75b0218f3e027a684428f41d4202ae = private unnamed_addr constant &lt;&#123; [13 x i8] &#125;&gt; &lt;&#123; [13 x i8] c&quot;./src/main.rs&quot; &#125;&gt;, align 1</span><br><span class="line">@alloc_d3c203eccfdbf3ed34a60d95d18a14a1 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\04\00\00\00\11\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_99d2826d05bd0993a8fad3afefde19fc = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\05\00\00\00\0C\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line">@alloc_b2a37afe33021e993e7381f0393662d5 = private unnamed_addr constant &lt;&#123; ptr, [16 x i8] &#125;&gt; &lt;&#123; ptr @alloc_1a75b0218f3e027a684428f41d4202ae, [16 x i8] c&quot;\0D\00\00\00\00\00\00\00\06\00\00\00\0D\00\00\00&quot; &#125;&gt;, align 8</span><br><span class="line"></span><br><span class="line">; &lt;core::ops::range::RangeInclusive&lt;T&gt; as core::iter::range::RangeInclusiveIteratorImpl&gt;::spec_next</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal &#123; i32, i32 &#125; @&quot;_ZN107_$LT$core..ops..range..RangeInclusive$LT$T$GT$$u20$as$u20$core..iter..range..RangeInclusiveIteratorImpl$GT$9spec_next17hc741d3680c8b27edE&quot;(ptr align 4 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %result = alloca [4 x i8], align 4</span><br><span class="line">  %_0 = alloca [8 x i8], align 4</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %self, i64 8</span><br><span class="line">  %1 = load i8, ptr %0, align 4</span><br><span class="line">  %_10 = trunc i8 %1 to i1</span><br><span class="line">  br i1 %_10, label %bb9, label %bb10</span><br><span class="line"></span><br><span class="line">bb10:                                             ; preds = %start</span><br><span class="line">  %_13 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %_3.i = load i32, ptr %self, align 4</span><br><span class="line">  %_4.i = load i32, ptr %_13, align 4</span><br><span class="line">  %_0.i = icmp sle i32 %_3.i, %_4.i</span><br><span class="line">  %_2 = xor i1 %_0.i, true</span><br><span class="line">  br i1 %_2, label %bb1, label %bb2</span><br><span class="line"></span><br><span class="line">bb9:                                              ; preds = %start</span><br><span class="line">  br label %bb1</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %bb10</span><br><span class="line">  %_5 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %_3.i1 = load i32, ptr %self, align 4</span><br><span class="line">  %_4.i2 = load i32, ptr %_5, align 4</span><br><span class="line">  %_0.i3 = icmp slt i32 %_3.i1, %_4.i2</span><br><span class="line">  br i1 %_0.i3, label %bb4, label %bb6</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %bb9, %bb10</span><br><span class="line">  store i32 0, ptr %_0, align 4</span><br><span class="line">  br label %bb8</span><br><span class="line"></span><br><span class="line">bb6:                                              ; preds = %bb2</span><br><span class="line">  %2 = getelementptr inbounds i8, ptr %self, i64 8</span><br><span class="line">  store i8 1, ptr %2, align 4</span><br><span class="line">  %3 = load i32, ptr %self, align 4</span><br><span class="line">  store i32 %3, ptr %result, align 4</span><br><span class="line">  br label %bb7</span><br><span class="line"></span><br><span class="line">bb4:                                              ; preds = %bb2</span><br><span class="line">  %_8 = load i32, ptr %self, align 4</span><br><span class="line">; call &lt;i32 as core::iter::range::Step&gt;::forward_unchecked</span><br><span class="line">  %n = call i32 @&quot;_ZN47_$LT$i32$u20$as$u20$core..iter..range..Step$GT$17forward_unchecked17h2d75c3d40c551b02E&quot;(i32 %_8, i64 1)</span><br><span class="line">  %4 = load i32, ptr %self, align 4</span><br><span class="line">  store i32 %4, ptr %result, align 4</span><br><span class="line">  store i32 %n, ptr %self, align 4</span><br><span class="line">  br label %bb7</span><br><span class="line"></span><br><span class="line">bb7:                                              ; preds = %bb4, %bb6</span><br><span class="line">  %5 = load i32, ptr %result, align 4</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %_0, i64 4</span><br><span class="line">  store i32 %5, ptr %6, align 4</span><br><span class="line">  store i32 1, ptr %_0, align 4</span><br><span class="line">  br label %bb8</span><br><span class="line"></span><br><span class="line">bb8:                                              ; preds = %bb1, %bb7</span><br><span class="line">  %7 = load i32, ptr %_0, align 4</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %_0, i64 4</span><br><span class="line">  %9 = load i32, ptr %8, align 4</span><br><span class="line">  %10 = insertvalue &#123; i32, i32 &#125; poison, i32 %7, 0</span><br><span class="line">  %11 = insertvalue &#123; i32, i32 &#125; %10, i32 %9, 1</span><br><span class="line">  ret &#123; i32, i32 &#125; %11</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define hidden i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr %main, i64 %argc, ptr %argv, i8 %sigpipe) unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_8 = alloca [8 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %main, ptr %_8, align 8</span><br><span class="line">; call std::rt::lang_start_internal</span><br><span class="line">  %0 = call i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1 %_8, ptr align 8 @vtable.0, i64 %argc, ptr %argv, i8 %sigpipe)</span><br><span class="line">  store i64 %0, ptr %_5, align 8</span><br><span class="line">  %v = load i64, ptr %_5, align 8</span><br><span class="line">  ret i64 %v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %self = alloca [1 x i8], align 1</span><br><span class="line">  %_4 = load ptr, ptr %_1, align 8</span><br><span class="line">; call std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">  call void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %_4)</span><br><span class="line">; call &lt;() as std::process::Termination&gt;::report</span><br><span class="line">  %0 = call i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;()</span><br><span class="line">  store i8 %0, ptr %self, align 1</span><br><span class="line">  %_6 = load i8, ptr %self, align 1</span><br><span class="line">  %_0 = zext i8 %_6 to i32</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::sys::backtrace::__rust_begin_short_backtrace</span><br><span class="line">; Function Attrs: noinline uwtable</span><br><span class="line">define internal void @_ZN3std3sys9backtrace28__rust_begin_short_backtrace17hcfceb07a4f8a12b8E(ptr %f) unnamed_addr #2 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  call void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %f)</span><br><span class="line">  call void asm sideeffect &quot;&quot;, &quot;~&#123;memory&#125;&quot;(), !srcloc !3</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;i32 as core::iter::range::Step&gt;::forward_unchecked</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN47_$LT$i32$u20$as$u20$core..iter..range..Step$GT$17forward_unchecked17h2d75c3d40c551b02E&quot;(i32 %start1, i64 %n) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %0 = alloca [1 x i8], align 1</span><br><span class="line">  %self = alloca [8 x i8], align 4</span><br><span class="line">  %rhs = trunc i64 %n to i32</span><br><span class="line">  %1 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %start1, i32 %rhs)</span><br><span class="line">  %_11.0 = extractvalue &#123; i32, i1 &#125; %1, 0</span><br><span class="line">  %_11.1 = extractvalue &#123; i32, i1 &#125; %1, 1</span><br><span class="line">  %_8 = icmp slt i32 %rhs, 0</span><br><span class="line">  %b = xor i1 %_11.1, %_8</span><br><span class="line">  %2 = zext i1 %b to i8</span><br><span class="line">  store i8 %2, ptr %0, align 1</span><br><span class="line">  %3 = load i8, ptr %0, align 1</span><br><span class="line">  %_5 = trunc i8 %3 to i1</span><br><span class="line">  br i1 %_5, label %bb2, label %bb3</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %start</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  store i32 %_11.0, ptr %4, align 4</span><br><span class="line">  store i32 1, ptr %self, align 4</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  %val = load i32, ptr %5, align 4</span><br><span class="line">  ret i32 %val</span><br><span class="line"></span><br><span class="line">bb2:                                              ; preds = %start</span><br><span class="line">  %6 = load i32, ptr @0, align 4</span><br><span class="line">  %7 = load i32, ptr getelementptr inbounds (i8, ptr @0, i64 4), align 4</span><br><span class="line">  store i32 %6, ptr %self, align 4</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %self, i64 4</span><br><span class="line">  store i32 %7, ptr %8, align 4</span><br><span class="line">; call core::hint::unreachable_unchecked::precondition_check</span><br><span class="line">  call void @_ZN4core4hint21unreachable_unchecked18precondition_check17h159a5fa27563914cE() #10</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::intrinsics::unlikely</span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">define internal zeroext i1 @_ZN4core10intrinsics8unlikely17had3dabe335c627beE(i1 zeroext %b) unnamed_addr #3 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i1 %b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::fmt::Arguments::new_v1</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_0, ptr align 8 %pieces, ptr align 8 %args) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  store ptr %pieces, ptr %_0, align 8</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i64 2, ptr %0, align 8</span><br><span class="line">  %1 = load ptr, ptr @1, align 8</span><br><span class="line">  %2 = load i64, ptr getelementptr inbounds (i8, ptr @1, i64 8), align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_0, i64 32</span><br><span class="line">  store ptr %1, ptr %3, align 8</span><br><span class="line">  %4 = getelementptr inbounds i8, ptr %3, i64 8</span><br><span class="line">  store i64 %2, ptr %4, align 8</span><br><span class="line">  %5 = getelementptr inbounds i8, ptr %_0, i64 16</span><br><span class="line">  store ptr %args, ptr %5, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %5, i64 8</span><br><span class="line">  store i64 1, ptr %6, align 8</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_0, i32 %start1, i32 %end) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  store i32 %start1, ptr %_0, align 4</span><br><span class="line">  %0 = getelementptr inbounds i8, ptr %_0, i64 4</span><br><span class="line">  store i32 %end, ptr %0, align 4</span><br><span class="line">  %1 = getelementptr inbounds i8, ptr %_0, i64 8</span><br><span class="line">  store i8 0, ptr %1, align 4</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once&#123;&#123;vtable.shim&#125;&#125;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @&quot;_ZN4core3ops8function6FnOnce40call_once$u7b$$u7b$vtable.shim$u7d$$u7d$17hfd2d60bfe7529b4fE&quot;(ptr %_1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %0 = load ptr, ptr %_1, align 8</span><br><span class="line">; call core::ops::function::FnOnce::call_once</span><br><span class="line">  %_0 = call i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0)</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @_ZN4core3ops8function6FnOnce9call_once17h29a401e81c82af06E(ptr %_1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  call void %_1()</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ops::function::FnOnce::call_once</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i32 @_ZN4core3ops8function6FnOnce9call_once17h6b929b3950cde825E(ptr %0) unnamed_addr #0 personality ptr @rust_eh_personality &#123;</span><br><span class="line">start:</span><br><span class="line">  %1 = alloca [16 x i8], align 8</span><br><span class="line">  %_2 = alloca [0 x i8], align 1</span><br><span class="line">  %_1 = alloca [8 x i8], align 8</span><br><span class="line">  store ptr %0, ptr %_1, align 8</span><br><span class="line">; invoke std::rt::lang_start::&#123;&#123;closure&#125;&#125;</span><br><span class="line">  %_0 = invoke i32 @&quot;_ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h4a9681ad1c62fe4aE&quot;(ptr align 8 %_1)</span><br><span class="line">          to label %bb1 unwind label %cleanup</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %cleanup</span><br><span class="line">  %2 = load ptr, ptr %1, align 8</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  %4 = load i32, ptr %3, align 8</span><br><span class="line">  %5 = insertvalue &#123; ptr, i32 &#125; poison, ptr %2, 0</span><br><span class="line">  %6 = insertvalue &#123; ptr, i32 &#125; %5, i32 %4, 1</span><br><span class="line">  resume &#123; ptr, i32 &#125; %6</span><br><span class="line"></span><br><span class="line">cleanup:                                          ; preds = %start</span><br><span class="line">  %7 = landingpad &#123; ptr, i32 &#125;</span><br><span class="line">          cleanup</span><br><span class="line">  %8 = extractvalue &#123; ptr, i32 &#125; %7, 0</span><br><span class="line">  %9 = extractvalue &#123; ptr, i32 &#125; %7, 1</span><br><span class="line">  store ptr %8, ptr %1, align 8</span><br><span class="line">  %10 = getelementptr inbounds i8, ptr %1, i64 8</span><br><span class="line">  store i32 %9, ptr %10, align 8</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb1:                                              ; preds = %start</span><br><span class="line">  ret i32 %_0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::ptr::drop_in_place&lt;std::rt::lang_start&lt;()&gt;::&#123;&#123;closure&#125;&#125;&gt;</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN4core3ptr85drop_in_place$LT$std..rt..lang_start$LT$$LP$$RP$$GT$..$u7b$$u7b$closure$u7d$$u7d$$GT$17hb322fcffbb433df1E&quot;(ptr align 8 %_1) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::hint::unreachable_unchecked::precondition_check</span><br><span class="line">; Function Attrs: inlinehint nounwind uwtable</span><br><span class="line">define internal void @_ZN4core4hint21unreachable_unchecked18precondition_check17h159a5fa27563914cE() unnamed_addr #4 &#123;</span><br><span class="line">start:</span><br><span class="line">; call core::panicking::panic_nounwind</span><br><span class="line">  call void @_ZN4core9panicking14panic_nounwind17h0343eb3636eafe8aE(ptr align 1 @alloc_1eb6f53a157dccb32488e066ad957e6d, i64 82) #11</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; core::iter::range::&lt;impl core::iter::traits::iterator::Iterator for core::ops::range::RangeInclusive&lt;A&gt;&gt;::next</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal &#123; i32, i32 &#125; @&quot;_ZN4core4iter5range110_$LT$impl$u20$core..iter..traits..iterator..Iterator$u20$for$u20$core..ops..range..RangeInclusive$LT$A$GT$$GT$4next17h870a34fae65efbb7E&quot;(ptr align 4 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">; call &lt;core::ops::range::RangeInclusive&lt;T&gt; as core::iter::range::RangeInclusiveIteratorImpl&gt;::spec_next</span><br><span class="line">  %0 = call &#123; i32, i32 &#125; @&quot;_ZN107_$LT$core..ops..range..RangeInclusive$LT$T$GT$$u20$as$u20$core..iter..range..RangeInclusiveIteratorImpl$GT$9spec_next17hc741d3680c8b27edE&quot;(ptr align 4 %self)</span><br><span class="line">  %_0.0 = extractvalue &#123; i32, i32 &#125; %0, 0</span><br><span class="line">  %_0.1 = extractvalue &#123; i32, i32 &#125; %0, 1</span><br><span class="line">  %1 = insertvalue &#123; i32, i32 &#125; poison, i32 %_0.0, 0</span><br><span class="line">  %2 = insertvalue &#123; i32, i32 &#125; %1, i32 %_0.1, 1</span><br><span class="line">  ret &#123; i32, i32 &#125; %2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;() as std::process::Termination&gt;::report</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal i8 @&quot;_ZN54_$LT$$LP$$RP$$u20$as$u20$std..process..Termination$GT$6report17h0b9647170f0b4230E&quot;() unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  ret i8 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; &lt;I as core::iter::traits::collect::IntoIterator&gt;::into_iter</span><br><span class="line">; Function Attrs: inlinehint uwtable</span><br><span class="line">define internal void @&quot;_ZN63_$LT$I$u20$as$u20$core..iter..traits..collect..IntoIterator$GT$9into_iter17h8e713e921db3999eE&quot;(ptr sret([12 x i8]) align 4 %_0, ptr align 4 %self) unnamed_addr #0 &#123;</span><br><span class="line">start:</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %_0, ptr align 4 %self, i64 12, i1 false)</span><br><span class="line">  ret void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3.i = alloca [16 x i8], align 8</span><br><span class="line">  %_22 = alloca [16 x i8], align 8</span><br><span class="line">  %_21 = alloca [16 x i8], align 8</span><br><span class="line">  %_18 = alloca [48 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 4</span><br><span class="line">  %iter = alloca [12 x i8], align 4</span><br><span class="line">  %_3 = alloca [12 x i8], align 4</span><br><span class="line">  %_2 = alloca [12 x i8], align 4</span><br><span class="line">  %sum = alloca [4 x i8], align 4</span><br><span class="line">  store i32 0, ptr %sum, align 4</span><br><span class="line">; call core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">  call void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_3, i32 1, i32 100)</span><br><span class="line">; call &lt;I as core::iter::traits::collect::IntoIterator&gt;::into_iter</span><br><span class="line">  call void @&quot;_ZN63_$LT$I$u20$as$u20$core..iter..traits..collect..IntoIterator$GT$9into_iter17h8e713e921db3999eE&quot;(ptr sret([12 x i8]) align 4 %_2, ptr align 4 %_3)</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %iter, ptr align 4 %_2, i64 12, i1 false)</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %bb12, %bb10, %start</span><br><span class="line">; call core::iter::range::&lt;impl core::iter::traits::iterator::Iterator for core::ops::range::RangeInclusive&lt;A&gt;&gt;::next</span><br><span class="line">  %0 = call &#123; i32, i32 &#125; @&quot;_ZN4core4iter5range110_$LT$impl$u20$core..iter..traits..iterator..Iterator$u20$for$u20$core..ops..range..RangeInclusive$LT$A$GT$$GT$4next17h870a34fae65efbb7E&quot;(ptr align 4 %iter)</span><br><span class="line">  %1 = extractvalue &#123; i32, i32 &#125; %0, 0</span><br><span class="line">  %2 = extractvalue &#123; i32, i32 &#125; %0, 1</span><br><span class="line">  store i32 %1, ptr %_5, align 4</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_5, i64 4</span><br><span class="line">  store i32 %2, ptr %3, align 4</span><br><span class="line">  %4 = load i32, ptr %_5, align 4</span><br><span class="line">  %_7 = zext i32 %4 to i64</span><br><span class="line">  %5 = icmp eq i64 %_7, 0</span><br><span class="line">  br i1 %5, label %bb7, label %bb6</span><br><span class="line"></span><br><span class="line">bb7:                                              ; preds = %bb3</span><br><span class="line">  store ptr %sum, ptr %_3.i, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %_3.i, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;, ptr %6, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_22, ptr align 8 %_3.i, i64 16, i1 false)</span><br><span class="line">  %7 = getelementptr inbounds [1 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_21, i64 0, i64 0</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %7, ptr align 8 %_22, i64 16, i1 false)</span><br><span class="line">; call core::fmt::Arguments::new_v1</span><br><span class="line">  call void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_18, ptr align 8 @alloc_f87b91d646f532f744b8a218a32891e2, ptr align 8 %_21)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_18)</span><br><span class="line">  ret void</span><br><span class="line"></span><br><span class="line">bb6:                                              ; preds = %bb3</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %_5, i64 4</span><br><span class="line">  %i = load i32, ptr %8, align 4</span><br><span class="line">  %9 = call &#123; i32, i1 &#125; @llvm.smul.with.overflow.i32(i32 %i, i32 2)</span><br><span class="line">  %_10.0 = extractvalue &#123; i32, i1 &#125; %9, 0</span><br><span class="line">  %_10.1 = extractvalue &#123; i32, i1 &#125; %9, 1</span><br><span class="line">  br i1 %_10.1, label %panic, label %bb8</span><br><span class="line"></span><br><span class="line">bb8:                                              ; preds = %bb6</span><br><span class="line">  %_14 = icmp eq i32 %_10.0, -2147483648</span><br><span class="line">  %_15 = and i1 false, %_14</span><br><span class="line">  br i1 %_15, label %panic1, label %bb10</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %bb6</span><br><span class="line">; call core::panicking::panic_const::panic_const_mul_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_mul_overflow17h774f5648c036f383E(ptr align 8 @alloc_d3c203eccfdbf3ed34a60d95d18a14a1) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb10:                                             ; preds = %bb8</span><br><span class="line">  %_11 = srem i32 %_10.0, 3</span><br><span class="line">  %10 = icmp eq i32 %_11, 0</span><br><span class="line">  br i1 %10, label %bb11, label %bb3</span><br><span class="line"></span><br><span class="line">panic1:                                           ; preds = %bb8</span><br><span class="line">; call core::panicking::panic_const::panic_const_rem_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_rem_overflow17hf0a90bc09c9acb58E(ptr align 8 @alloc_99d2826d05bd0993a8fad3afefde19fc) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb11:                                             ; preds = %bb10</span><br><span class="line">  %11 = load i32, ptr %sum, align 4</span><br><span class="line">  %12 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %11, i32 %_10.0)</span><br><span class="line">  %_16.0 = extractvalue &#123; i32, i1 &#125; %12, 0</span><br><span class="line">  %_16.1 = extractvalue &#123; i32, i1 &#125; %12, 1</span><br><span class="line">  br i1 %_16.1, label %panic2, label %bb12</span><br><span class="line"></span><br><span class="line">bb12:                                             ; preds = %bb11</span><br><span class="line">  store i32 %_16.0, ptr %sum, align 4</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">panic2:                                           ; preds = %bb11</span><br><span class="line">; call core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8 @alloc_b2a37afe33021e993e7381f0393662d5) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb5:                                              ; No predecessors!</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">; std::rt::lang_start_internal</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare i64 @_ZN3std2rt19lang_start_internal17hed9c3972c1d4ad97E(ptr align 1, ptr align 8, i64, ptr, i8) unnamed_addr #1</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nosync nounwind speculatable willreturn memory(none)</span><br><span class="line">declare &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32, i32) #5</span><br><span class="line"></span><br><span class="line">; core::fmt::num::imp::&lt;impl core::fmt::Display for i32&gt;::fmt</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare zeroext i1 @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;(ptr align 4, ptr align 8) unnamed_addr #1</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)</span><br><span class="line">declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #6</span><br><span class="line"></span><br><span class="line">; Function Attrs: nounwind uwtable</span><br><span class="line">declare i32 @rust_eh_personality(i32, i32, i64, ptr, ptr) unnamed_addr #3</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_nounwind</span><br><span class="line">; Function Attrs: cold noinline noreturn nounwind uwtable</span><br><span class="line">declare void @_ZN4core9panicking14panic_nounwind17h0343eb3636eafe8aE(ptr align 1, i64) unnamed_addr #7</span><br><span class="line"></span><br><span class="line">; std::io::stdio::_print</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">declare void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8) unnamed_addr #1</span><br><span class="line"></span><br><span class="line">; Function Attrs: nocallback nofree nosync nounwind speculatable willreturn memory(none)</span><br><span class="line">declare &#123; i32, i1 &#125; @llvm.smul.with.overflow.i32(i32, i32) #5</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_mul_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_mul_overflow17h774f5648c036f383E(ptr align 8) unnamed_addr #8</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_rem_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_rem_overflow17hf0a90bc09c9acb58E(ptr align 8) unnamed_addr #8</span><br><span class="line"></span><br><span class="line">; core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">; Function Attrs: cold noinline noreturn uwtable</span><br><span class="line">declare void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8) unnamed_addr #8</span><br><span class="line"></span><br><span class="line">define i32 @main(i32 %0, ptr %1) unnamed_addr #9 &#123;</span><br><span class="line">top:</span><br><span class="line">  %2 = sext i32 %0 to i64</span><br><span class="line">; call std::rt::lang_start</span><br><span class="line">  %3 = call i64 @_ZN3std2rt10lang_start17h97eaae89b836eff1E(ptr @_ZN4main4main17h3df54791b8d52a26E, i64 %2, ptr %1, i8 0)</span><br><span class="line">  %4 = trunc i64 %3 to i32</span><br><span class="line">  ret i32 %4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">attributes #0 = &#123; inlinehint uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #1 = &#123; uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #2 = &#123; noinline uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #3 = &#123; nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #4 = &#123; inlinehint nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #5 = &#123; nocallback nofree nosync nounwind speculatable willreturn memory(none) &#125;</span><br><span class="line">attributes #6 = &#123; nocallback nofree nounwind willreturn memory(argmem: readwrite) &#125;</span><br><span class="line">attributes #7 = &#123; cold noinline noreturn nounwind uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #8 = &#123; cold noinline noreturn uwtable &quot;frame-pointer&quot;=&quot;all&quot; &quot;probe-stack&quot;=&quot;inline-asm&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #9 = &#123; &quot;frame-pointer&quot;=&quot;all&quot; &quot;target-cpu&quot;=&quot;penryn&quot; &#125;</span><br><span class="line">attributes #10 = &#123; nounwind &#125;</span><br><span class="line">attributes #11 = &#123; noreturn nounwind &#125;</span><br><span class="line">attributes #12 = &#123; noreturn &#125;</span><br><span class="line"></span><br><span class="line">!llvm.module.flags = !&#123;!0, !1&#125;</span><br><span class="line">!llvm.ident = !&#123;!2&#125;</span><br><span class="line"></span><br><span class="line">!0 = !&#123;i32 8, !&quot;PIC Level&quot;, i32 2&#125;</span><br><span class="line">!1 = !&#123;i32 7, !&quot;PIE Level&quot;, i32 2&#125;</span><br><span class="line">!2 = !&#123;!&quot;rustc version 1.83.0 (90b35a623 2024-11-26)&quot;&#125;</span><br><span class="line">!3 = !&#123;i32 2323022&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>核心逻辑在，300~393，一个迭代器，然后多个状态控制逻辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">; main::main</span><br><span class="line">; Function Attrs: uwtable</span><br><span class="line">define internal void @_ZN4main4main17h3df54791b8d52a26E() unnamed_addr #1 &#123;</span><br><span class="line">start:</span><br><span class="line">  %_3.i = alloca [16 x i8], align 8</span><br><span class="line">  %_22 = alloca [16 x i8], align 8</span><br><span class="line">  %_21 = alloca [16 x i8], align 8</span><br><span class="line">  %_18 = alloca [48 x i8], align 8</span><br><span class="line">  %_5 = alloca [8 x i8], align 4</span><br><span class="line">  %iter = alloca [12 x i8], align 4</span><br><span class="line">  %_3 = alloca [12 x i8], align 4</span><br><span class="line">  %_2 = alloca [12 x i8], align 4</span><br><span class="line">  %sum = alloca [4 x i8], align 4</span><br><span class="line">  store i32 0, ptr %sum, align 4</span><br><span class="line">; call core::ops::range::RangeInclusive&lt;Idx&gt;::new</span><br><span class="line">  call void @&quot;_ZN4core3ops5range25RangeInclusive$LT$Idx$GT$3new17h684f3b23c62427beE&quot;(ptr sret([12 x i8]) align 4 %_3, i32 1, i32 100)</span><br><span class="line">; call &lt;I as core::iter::traits::collect::IntoIterator&gt;::into_iter</span><br><span class="line">  call void @&quot;_ZN63_$LT$I$u20$as$u20$core..iter..traits..collect..IntoIterator$GT$9into_iter17h8e713e921db3999eE&quot;(ptr sret([12 x i8]) align 4 %_2, ptr align 4 %_3)</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 4 %iter, ptr align 4 %_2, i64 12, i1 false)</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">bb3:                                              ; preds = %bb12, %bb10, %start</span><br><span class="line">; call core::iter::range::&lt;impl core::iter::traits::iterator::Iterator for core::ops::range::RangeInclusive&lt;A&gt;&gt;::next</span><br><span class="line">  %0 = call &#123; i32, i32 &#125; @&quot;_ZN4core4iter5range110_$LT$impl$u20$core..iter..traits..iterator..Iterator$u20$for$u20$core..ops..range..RangeInclusive$LT$A$GT$$GT$4next17h870a34fae65efbb7E&quot;(ptr align 4 %iter)</span><br><span class="line">  %1 = extractvalue &#123; i32, i32 &#125; %0, 0</span><br><span class="line">  %2 = extractvalue &#123; i32, i32 &#125; %0, 1</span><br><span class="line">  store i32 %1, ptr %_5, align 4</span><br><span class="line">  %3 = getelementptr inbounds i8, ptr %_5, i64 4</span><br><span class="line">  store i32 %2, ptr %3, align 4</span><br><span class="line">  %4 = load i32, ptr %_5, align 4</span><br><span class="line">  %_7 = zext i32 %4 to i64</span><br><span class="line">  %5 = icmp eq i64 %_7, 0</span><br><span class="line">  br i1 %5, label %bb7, label %bb6</span><br><span class="line"></span><br><span class="line">bb7:                                              ; preds = %bb3</span><br><span class="line">  store ptr %sum, ptr %_3.i, align 8</span><br><span class="line">  %6 = getelementptr inbounds i8, ptr %_3.i, i64 8</span><br><span class="line">  store ptr @&quot;_ZN4core3fmt3num3imp52_$LT$impl$u20$core..fmt..Display$u20$for$u20$i32$GT$3fmt17hd4cc997cbb4e8c47E&quot;, ptr %6, align 8</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %_22, ptr align 8 %_3.i, i64 16, i1 false)</span><br><span class="line">  %7 = getelementptr inbounds [1 x %&quot;core::fmt::rt::Argument&lt;&#x27;_&gt;&quot;], ptr %_21, i64 0, i64 0</span><br><span class="line">  call void @llvm.memcpy.p0.p0.i64(ptr align 8 %7, ptr align 8 %_22, i64 16, i1 false)</span><br><span class="line">; call core::fmt::Arguments::new_v1</span><br><span class="line">  call void @_ZN4core3fmt9Arguments6new_v117heee7a3d157a7d650E(ptr sret([48 x i8]) align 8 %_18, ptr align 8 @alloc_f87b91d646f532f744b8a218a32891e2, ptr align 8 %_21)</span><br><span class="line">; call std::io::stdio::_print</span><br><span class="line">  call void @_ZN3std2io5stdio6_print17h4995f2f7a820031eE(ptr align 8 %_18)</span><br><span class="line">  ret void</span><br><span class="line"></span><br><span class="line">bb6:                                              ; preds = %bb3</span><br><span class="line">  %8 = getelementptr inbounds i8, ptr %_5, i64 4</span><br><span class="line">  %i = load i32, ptr %8, align 4</span><br><span class="line">  %9 = call &#123; i32, i1 &#125; @llvm.smul.with.overflow.i32(i32 %i, i32 2)</span><br><span class="line">  %_10.0 = extractvalue &#123; i32, i1 &#125; %9, 0</span><br><span class="line">  %_10.1 = extractvalue &#123; i32, i1 &#125; %9, 1</span><br><span class="line">  br i1 %_10.1, label %panic, label %bb8</span><br><span class="line"></span><br><span class="line">bb8:                                              ; preds = %bb6</span><br><span class="line">  %_14 = icmp eq i32 %_10.0, -2147483648</span><br><span class="line">  %_15 = and i1 false, %_14</span><br><span class="line">  br i1 %_15, label %panic1, label %bb10</span><br><span class="line"></span><br><span class="line">panic:                                            ; preds = %bb6</span><br><span class="line">; call core::panicking::panic_const::panic_const_mul_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_mul_overflow17h774f5648c036f383E(ptr align 8 @alloc_d3c203eccfdbf3ed34a60d95d18a14a1) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb10:                                             ; preds = %bb8</span><br><span class="line">  %_11 = srem i32 %_10.0, 3</span><br><span class="line">  %10 = icmp eq i32 %_11, 0</span><br><span class="line">  br i1 %10, label %bb11, label %bb3</span><br><span class="line"></span><br><span class="line">panic1:                                           ; preds = %bb8</span><br><span class="line">; call core::panicking::panic_const::panic_const_rem_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_rem_overflow17hf0a90bc09c9acb58E(ptr align 8 @alloc_99d2826d05bd0993a8fad3afefde19fc) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb11:                                             ; preds = %bb10</span><br><span class="line">  %11 = load i32, ptr %sum, align 4</span><br><span class="line">  %12 = call &#123; i32, i1 &#125; @llvm.sadd.with.overflow.i32(i32 %11, i32 %_10.0)</span><br><span class="line">  %_16.0 = extractvalue &#123; i32, i1 &#125; %12, 0</span><br><span class="line">  %_16.1 = extractvalue &#123; i32, i1 &#125; %12, 1</span><br><span class="line">  br i1 %_16.1, label %panic2, label %bb12</span><br><span class="line"></span><br><span class="line">bb12:                                             ; preds = %bb11</span><br><span class="line">  store i32 %_16.0, ptr %sum, align 4</span><br><span class="line">  br label %bb3</span><br><span class="line"></span><br><span class="line">panic2:                                           ; preds = %bb11</span><br><span class="line">; call core::panicking::panic_const::panic_const_add_overflow</span><br><span class="line">  call void @_ZN4core9panicking11panic_const24panic_const_add_overflow17h013459caa83aef04E(ptr align 8 @alloc_b2a37afe33021e993e7381f0393662d5) #12</span><br><span class="line">  unreachable</span><br><span class="line"></span><br><span class="line">bb5:                                              ; No predecessors!</span><br><span class="line">  unreachable</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="4-无-GC（Garbage-Collection）"><a href="#4-无-GC（Garbage-Collection）" class="headerlink" title="4. 无 GC（Garbage Collection）"></a>4. <strong>无 GC（Garbage Collection）</strong></h2><p>Rust 采用<strong>所有权系统（Ownership System）和生命周期（Lifetime）管理内存，而不是使用垃圾回收（GC）。这样避免了 GC 带来的额外运行时开销，并保证了确定性释放</strong>，提高了性能。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Data</span></span> &#123;</span><br><span class="line">    value: <span class="built_in">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> d = Data &#123; value: <span class="number">42</span> &#125;; <span class="comment">// 在栈上分配，无需堆分配</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, d.value);    <span class="comment">// 在 `main` 结束时自动释放，无需 GC</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-Rust-零成本抽象的优势"><a href="#5-Rust-零成本抽象的优势" class="headerlink" title="5. Rust 零成本抽象的优势"></a>5. Rust 零成本抽象的优势</h2><ul>
<li><strong>高效运行</strong>：编译器优化可以让高级抽象不会影响性能。</li>
<li><strong>避免动态分配</strong>：编译时确定内存布局，减少堆分配。</li>
<li><strong>内联展开</strong>：编译器能优化泛型和迭代器，避免额外的函数调用和分配。</li>
<li><strong>无 GC 开销</strong>：所有权系统提供安全性，同时保证了性能。</li>
</ul>
<p>Rust 通过零成本抽象，使得开发者可以同时享受<strong>高性能</strong>和<strong>高级抽象</strong>，让代码既易读又高效。</p>
<h1 id="三、Java抽象对比"><a href="#三、Java抽象对比" class="headerlink" title="三、Java抽象对比"></a>三、Java抽象对比</h1><p>Java <strong>不具备</strong> Rust 那样的<strong>零成本抽象（Zero-Cost Abstraction）</strong>，但它在一定程度上能通过<strong>JIT（Just-In-Time 编译）、内联优化和逃逸分析</strong>来减少抽象带来的额外开销。</p>
<p><strong>Java 主要的抽象开销</strong></p>
<p>相比 Rust（静态编译），Java 是 <strong>JVM（Java Virtual Machine）</strong> 运行的语言，抽象通常带来以下开销：</p>
<ol>
<li><strong>动态分派（Dynamic Dispatch）</strong><ul>
<li>Java 的接口调用使用 <strong>虚方法表（vtable）</strong> 或 <strong>动态方法解析（invokevirtual、invokeinterface）</strong>，比 Rust 的<strong>静态分派</strong>（编译时确定）要慢。</li>
</ul>
</li>
<li><strong>垃圾回收（GC）</strong><ul>
<li>Java 依赖 GC 进行内存管理，而 Rust 通过<strong>所有权</strong>和<strong>借用检查</strong>在编译期确保内存安全，避免 GC 相关的性能损失。</li>
</ul>
</li>
<li><strong>对象分配 &amp; 逃逸分析</strong><ul>
<li>Java 的对象默认分配在<strong>堆</strong>上，而 Rust 变量通常在<strong>栈</strong>上（零成本）。</li>
<li>不过，JVM <strong>逃逸分析（Escape Analysis）</strong> 可以优化，将一些对象分配到栈上（<strong>栈上分配</strong>）或进行<strong>标量替换</strong>。</li>
</ul>
</li>
<li><strong>自动装箱（Autoboxing）</strong><ul>
<li>Java 泛型使用<strong>类型擦除</strong>（Type Erasure），基础类型 <code>int</code>、<code>double</code> 需要装箱到 <code>Integer</code>、<code>Double</code>，增加额外的堆分配和 GC 压力，而 Rust 泛型在编译时单态化，不需要装箱。</li>
</ul>
</li>
</ol>
<h1 id="四、Rust的编译过程"><a href="#四、Rust的编译过程" class="headerlink" title="四、Rust的编译过程"></a>四、Rust的编译过程</h1><p>Rust 编译成二进制的过程可以分为 <strong>前端（Rust 编译器）</strong> 和 <strong>后端（LLVM）</strong> 两个主要阶段，</p>
<p>LLVM（Low Level Virtual Machine，低级虚拟机）是一个<strong>模块化、可重用的编译器基础架构</strong>，它提供了<strong>优化、中间表示（IR）和代码生成</strong>的工具，支持多种编程语言（如 C、C++、Rust、Swift 等）。</p>
<p>虽然名字里有 “Virtual Machine”（虚拟机），但 LLVM <strong>不是</strong>像 Java VM 那样的运行时虚拟机，而是一个<strong>编译工具链</strong>，用于优化和生成高效的机器代码。</p>
<h2 id="Rust-编译流程"><a href="#Rust-编译流程" class="headerlink" title="Rust 编译流程"></a><strong>Rust 编译流程</strong></h2><p>Rust 代码最终变成二进制机器码的大致流程如下：</p>
<ol>
<li><strong>解析（Parsing）</strong>：将 Rust 源代码转换成 AST（抽象语法树）。</li>
<li><strong>HIR（High-Level Intermediate Representation）</strong>：高层中间表示，进行语法和类型检查。</li>
<li><strong>MIR（Mid-Level Intermediate Representation）</strong>：中间层表示，优化和借用检查。</li>
<li><strong>LLVM IR（Low-Level Intermediate Representation）</strong>：低层中间表示，进一步优化。</li>
<li><strong>LLVM 代码优化</strong>：包括内联、常量折叠、循环展开等优化。</li>
<li><strong>机器码（Assembly）</strong>：LLVM 生成汇编代码（<code>.s</code> 文件）。</li>
<li><strong>链接（Linking）</strong>：链接标准库、第三方库，生成最终的二进制可执行文件。</li>
</ol>
<p>下图可以直观地表示整个流程：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Rust 源代码</span><br><span class="line"><span class="code">    ↓（解析）</span></span><br><span class="line"><span class="code">AST（抽象语法树）</span></span><br><span class="line"><span class="code">    ↓（类型检查）</span></span><br><span class="line"><span class="code">HIR（高层中间表示）</span></span><br><span class="line"><span class="code">    ↓（借用检查）</span></span><br><span class="line"><span class="code">MIR（中间层表示）</span></span><br><span class="line"><span class="code">    ↓（优化）</span></span><br><span class="line"><span class="code">LLVM IR（低层中间表示）</span></span><br><span class="line"><span class="code">    ↓（LLVM 代码优化）</span></span><br><span class="line"><span class="code">汇编代码（.s）</span></span><br><span class="line"><span class="code">    ↓（汇编）</span></span><br><span class="line"><span class="code">目标机器码（.o）</span></span><br><span class="line"><span class="code">    ↓（链接）</span></span><br><span class="line"><span class="code">二进制可执行文件（ELF/PE/Mach-O）</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/09/26/%E6%B7%B1%E5%85%A5rabbitmq--%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%881%EF%BC%89/" rel="prev" title="深入rabbitmq--读书笔记（1）">
      <i class="fa fa-chevron-left"></i> 深入rabbitmq--读书笔记（1）
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81Rust%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-number">1.</span> <span class="nav-text">一、Rust核心特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8%EF%BC%88Memory-Safety%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">1. 内存安全（Memory Safety）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1%EF%BC%88Zero-Cost-Abstraction%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">2. 零成本抽象（Zero-Cost Abstraction）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%97%A0%E6%95%B0%E6%8D%AE%E7%AB%9E%E4%BA%89%E7%9A%84%E5%B9%B6%E5%8F%91%EF%BC%88Fearless-Concurrency%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">3. 无数据竞争的并发（Fearless Concurrency）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%BC%BA%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%EF%BC%88Strong-Type-System%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">4. 强类型系统（Strong Type System）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E9%AB%98%E6%95%88%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">1.5.</span> <span class="nav-text">5. 高效的错误处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-WebAssembly-%E6%94%AF%E6%8C%81"><span class="nav-number">1.6.</span> <span class="nav-text">6. WebAssembly 支持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E7%8E%B0%E4%BB%A3%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="nav-number">1.7.</span> <span class="nav-text">7. 现代工具链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E5%AE%89%E5%85%A8%E7%9A%84-FFI%EF%BC%88Foreign-Function-Interface%EF%BC%89"><span class="nav-number">1.8.</span> <span class="nav-text">8. 安全的 FFI（Foreign Function Interface）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1"><span class="nav-number">2.</span> <span class="nav-text">二、零成本抽象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%B3%9B%E5%9E%8B%EF%BC%88Monomorphization%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">1. 泛型（Monomorphization）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Trait-%E7%9A%84%E9%9D%99%E6%80%81%E5%88%86%E5%8F%91%EF%BC%88Static-Dispatch%EF%BC%89"><span class="nav-number">2.2.</span> <span class="nav-text">2. Trait 的静态分发（Static Dispatch）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%88Iterator%EF%BC%89%E4%BC%98%E5%8C%96"><span class="nav-number">2.3.</span> <span class="nav-text">3. 迭代器（Iterator）优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%97%A0-GC%EF%BC%88Garbage-Collection%EF%BC%89"><span class="nav-number">2.4.</span> <span class="nav-text">4. 无 GC（Garbage Collection）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Rust-%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">2.5.</span> <span class="nav-text">5. Rust 零成本抽象的优势</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81Java%E6%8A%BD%E8%B1%A1%E5%AF%B9%E6%AF%94"><span class="nav-number">3.</span> <span class="nav-text">三、Java抽象对比</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81Rust%E7%9A%84%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">四、Rust的编译过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Rust-%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B"><span class="nav-number">4.1.</span> <span class="nav-text">Rust 编译流程</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhan Hao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhan Hao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
